{
  "path": "/docs/how-plugins-apis-are-run/",
  "result": {
    "data": {
      "mdx": {
        "body": "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How APIs/Plugins Are Run\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"For most sites, plugins take up the majority of the build time. So what\\u2019s really happening when APIs are called?\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Note: this section only explains how \", mdx(\"inlineCode\", {\n    parentName: \"em\"\n  }, \"gatsby-node\"), \" plugins are run. Not browser or ssr plugins\")), mdx(\"h2\", {\n    \"id\": \"early-in-the-build\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#early-in-the-build\",\n    \"aria-label\": \"early in the build permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Early in the build\"), mdx(\"p\", null, \"Early in the bootstrap phase, we \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/bootstrap/load-plugins/index.js#L40\"\n  }), \"load all the configured plugins\"), \" (and internal plugins) for the site. These are saved into redux under the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"flattenedPlugins\"), \" namespace. Each plugin in redux contains the following fields:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"resolve\"), \": absolute path to the plugin\\u2019s directory\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"id\"), \": String concatenation of \\u2018Plugin \\u2019 and the name of the plugin. E.g \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Plugin query-runner\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"name\"), \": The name of the plugin. E.g \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"query-runner\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"version\"), \": The version as per the package.json. Or if it is a site plugin, one is generated from the file\\u2019s hash\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"pluginOptions\"), \": Plugin options as specified in \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/docs/gatsby-config/\"\n  }), \"gatsby-config.js\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"nodeAPIs\"), \": A list of node APIs that this plugin implements. E.g \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"[ 'sourceNodes', ...]\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"browserAPIs\"), \": List of browser APIs that this plugin implements\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"ssrAPIs\"), \": List of SSR APIs that this plugin implements\")), mdx(\"p\", null, \"In addition, we also create a lookup from api to the plugins that implement it and save this to redux as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"api-to-plugins\"), \". This is implemented in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/bootstrap/load-plugins/validate.js#L106\"\n  }), \"load-plugins/validate.js\")), mdx(\"h2\", {\n    \"id\": \"apiruninstance\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#apiruninstance\",\n    \"aria-label\": \"apiruninstance permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"apiRunInstance\"), mdx(\"p\", null, \"Some API calls can take a while to finish. So every time an API is run, we create an object called \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/utils/api-runner-node.js#L179\"\n  }), \"apiRunInstance\"), \" to track it. It contains the following notable fields:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"id\"), \": Unique identifier generated based on type of API\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"api\"), \": The API we\\u2019re running. E.g \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"onCreateNode\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"args\"), \": Any arguments passed to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"api-runner-node\"), \". E.g a node object\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"pluginSource\"), \": optional name of the plugin that initiated the original call\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"resolve\"), \": promise resolve callback to be called when the API has finished running\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"startTime\"), \": time that the API run was started\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"span\"), \": opentracing span for tracing builds\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"traceId\"), \": optional args.traceId provided if API will result in further API calls (\", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#using-traceid-to-await-downstream-api-calls\"\n  }), \"see below\"), \")\")), mdx(\"p\", null, \"We immediately place this object into an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apisRunningById\"), \" Map, where we track its execution.\"), mdx(\"h2\", {\n    \"id\": \"running-each-plugin\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#running-each-plugin\",\n    \"aria-label\": \"running each plugin permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Running each plugin\"), mdx(\"p\", null, \"Next, we filter all \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"flattenedPlugins\"), \" down to those that implement the API we\\u2019re trying to run. For each plugin, we require its \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-node.js\"), \" and call its exported API function. E.g if API was \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sourceNodes\"), \", it would result in a call to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsbyNode['sourceNodes'](...apiCallargs)\"), \".\"), mdx(\"h2\", {\n    \"id\": \"injected-arguments\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#injected-arguments\",\n    \"aria-label\": \"injected arguments permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Injected arguments\"), mdx(\"p\", null, \"API implementations are passed a variety of useful \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/actions/\"\n  }), \"actions\"), \" and other interesting functions/objects. These arguments are \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/utils/api-runner-node.js#L94\"\n  }), \"created\"), \" each time a plugin is run for an API, which allows us to rebind actions with default information.\"), mdx(\"p\", null, \"All actions take 3 arguments:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The core information required by the action. E.g for \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/docs/actions/#createNode\"\n  }), \"createNode\"), \", we must pass a node\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The plugin that is calling this action. E.g \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"createNode\"), \" uses this to assign the owner of the new node\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"An object with misc action options:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"traceId\"), \": \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#using-traceid-to-await-downstream-api-calls\"\n  }), \"See below\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"parentSpan\"), \": opentracing span (see \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/docs/performance-tracing/\"\n  }), \"tracing docs\"), \")\")))), mdx(\"p\", null, \"Passing the plugin and action options on every single action call would be extremely painful for plugin/site authors. Since we know the plugin, traceId and parentSpan when we\\u2019re running our API, we can rebind injected actions so these arguments are already provided. This is done in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/utils/api-runner-node.js#L14\"\n  }), \"doubleBind\"), \" step.\"), mdx(\"h2\", {\n    \"id\": \"waiting-for-all-plugins-to-run\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#waiting-for-all-plugins-to-run\",\n    \"aria-label\": \"waiting for all plugins to run permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Waiting for all plugins to run\"), mdx(\"p\", null, \"Each plugin is run inside a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/map-series\"\n  }), \"map-series\"), \" promise, which allows them to be executed concurrently. Once all plugins have finished running, we remove them from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/utils/api-runner-node.js#L246\"\n  }), \"apisRunningById\"), \" and fire a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"API_RUNNING_QUEUE_EMPTY\"), \" event. This in turn, results in any dirty pages being recreated, as well as their queries. Finally, the results are returned.\"), mdx(\"h2\", {\n    \"id\": \"using-traceid-to-await-downstream-api-calls\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#using-traceid-to-await-downstream-api-calls\",\n    \"aria-label\": \"using traceid to await downstream api calls permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Using traceID to await downstream API calls\"), mdx(\"p\", null, \"The majority of API calls result in one or more implementing plugins being called. We then wait for them all to complete, and return. But some plugins (e.g \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/node-apis/#sourceNodes\"\n  }), \"sourceNodes\"), \") result in calls to actions that themselves call APIs. We need some way of tracing whether an API call originated from another API call, so that we can wait on all child calls to complete. The mechanism for this is the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"traceId\"), \".\"), mdx(\"svg\", {\n    \"width\": \"406pt\",\n    \"height\": \"925pt\",\n    \"viewBox\": \"0.00 0.00 406.29 924.60\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"xlink\": \"http://www.w3.org/1999/xlink\",\n    \"style\": {\n      \"maxWidth\": \"100%\",\n      \"height\": \"auto\"\n    }\n  }, mdx(\"g\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"id\": \"graph0\",\n    \"className\": \"graph\",\n    \"transform\": \"scale(1 1) rotate(0) translate(4 920.6)\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"%0\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#ffffff\",\n    \"stroke\": \"transparent\",\n    \"points\": \"-4,4 -4,-920.6 402.2915,-920.6 402.2915,4 -4,4\"\n  })), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node1\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"initialCall\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"355.9521,-916.5002 147.8229,-916.5002 147.8229,-807.8998 355.9521,-807.8998 355.9521,-916.5002\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"start\",\n    \"x\": \"155.8552\",\n    \"y\": \"-900\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"apiRunner(`sourceNodes`, {\"), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"start\",\n    \"x\": \"155.8552\",\n    \"y\": \"-883.2\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \" \\xA0\\xA0\\xA0traceId: `initial-sourceNodes`,\"), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"start\",\n    \"x\": \"155.8552\",\n    \"y\": \"-866.4\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \" \\xA0\\xA0\\xA0waitForCascadingActions: true,\"), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"start\",\n    \"x\": \"155.8552\",\n    \"y\": \"-849.6\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \" \\xA0\\xA0\\xA0parentSpan: parentSpan\"), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"start\",\n    \"x\": \"155.8552\",\n    \"y\": \"-832.8\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"})\"), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"251.8875\",\n    \"y\": \"-816\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \" \")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node2\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"apiRunner1\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"311.3995,-770.8 192.3755,-770.8 192.3755,-734.8 311.3995,-734.8 311.3995,-770.8\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"251.8875\",\n    \"y\": \"-748.6\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"api-runner-node.js\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge1\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"initialCall->apiRunner1\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M251.8875,-807.8205C251.8875,-798.5734 251.8875,-789.3141 251.8875,-781.0997\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"255.3876,-780.9918 251.8875,-770.9918 248.3876,-780.9919 255.3876,-780.9918\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node3\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"sourceNodes\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"211.6283,-682 72.1467,-682 72.1467,-646 211.6283,-646 211.6283,-682\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"141.8875\",\n    \"y\": \"-659.8\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"plugin.SourceNodes()\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge3\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"apiRunner1->sourceNodes\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M229.3619,-734.6157C212.9007,-721.327 190.3929,-703.1571 172.3311,-688.5763\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"174.3625,-685.718 164.383,-682.16 169.9655,-691.1648 174.3625,-685.718\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"215.9927\",\n    \"y\": \"-704.2\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"call\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node5\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"apisRunning\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"398.1956,-36 203.5794,-36 203.5794,0 398.1956,0 398.1956,-36\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"300.8875\",\n    \"y\": \"-13.8\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"apisRunningByTraceId[traceId]\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge2\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"apiRunner1->apisRunning\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M269.0253,-734.6564C283.1555,-717.743 300.8875,-691.1163 300.8875,-664 300.8875,-664 300.8875,-664 300.8875,-106.8 300.8875,-86.5006 300.8875,-63.591 300.8875,-46.1264\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"304.3876,-46.0279 300.8875,-36.0279 297.3876,-46.0279 304.3876,-46.0279\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"321.1077\",\n    \"y\": \"-393.4\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"set to 1\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node4\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"createNode\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"139.1544,-593.2 22.6206,-593.2 22.6206,-557.2 139.1544,-557.2 139.1544,-593.2\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"80.8875\",\n    \"y\": \"-571\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"createNode(node)\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge4\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"sourceNodes->createNode\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M98.8308,-645.8831C91.9695,-641.0818 85.7778,-635.1773 81.6377,-628 77.4507,-620.7413 76.158,-611.9347 76.2266,-603.611\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"79.729,-603.6961 76.9261,-593.4787 72.7456,-603.2139 79.729,-603.6961\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"184.5124\",\n    \"y\": \"-615.4\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"call (traceID passed via doubleBind)\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node6\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"createNodeReducer\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"161.6627,-504.4 .1123,-504.4 .1123,-468.4 161.6627,-468.4 161.6627,-504.4\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"80.8875\",\n    \"y\": \"-482.2\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"CREATE_NODE reducer\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge5\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"createNode->createNodeReducer\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M80.8875,-556.8006C80.8875,-544.6949 80.8875,-528.6076 80.8875,-514.8674\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"84.3876,-514.472 80.8875,-504.472 77.3876,-514.4721 84.3876,-514.472\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"158.0415\",\n    \"y\": \"-526.6\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"triggers (action has traceId)\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node7\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"CREATE_NODE\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"156.0174,-415.6 5.7576,-415.6 5.7576,-379.6 156.0174,-379.6 156.0174,-415.6\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"80.8875\",\n    \"y\": \"-393.4\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"CREATE_NODE event\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge6\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"createNodeReducer->CREATE_NODE\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M80.8875,-468.0006C80.8875,-455.8949 80.8875,-439.8076 80.8875,-426.0674\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"84.3876,-425.672 80.8875,-415.672 77.3876,-425.6721 84.3876,-425.672\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"149.8809\",\n    \"y\": \"-437.8\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"emits (event has traceId)\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node8\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"pluginRunner\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"136.7005,-326.8 31.0745,-326.8 31.0745,-290.8 136.7005,-290.8 136.7005,-326.8\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"83.8875\",\n    \"y\": \"-304.6\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"plugin-runner.js\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge7\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"CREATE_NODE->pluginRunner\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M81.5091,-379.2006C81.9181,-367.0949 82.4616,-351.0076 82.9258,-337.2674\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"86.4372,-336.9845 83.277,-326.872 79.4412,-336.7481 86.4372,-336.9845\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"167.6253\",\n    \"y\": \"-349\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"handled by (event has traceId)\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node10\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"apiRunnerOnCreateNode\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"187.2577,-253.8 4.5173,-253.8 4.5173,-161.8 187.2577,-161.8 187.2577,-253.8\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"start\",\n    \"x\": \"12.4524\",\n    \"y\": \"-237.2\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"apiRunner(`onCreateNode`, {\"), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"start\",\n    \"x\": \"12.4524\",\n    \"y\": \"-220.4\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \" \\xA0\\xA0\\xA0node,\"), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"start\",\n    \"x\": \"12.4524\",\n    \"y\": \"-203.6\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \" \\xA0\\xA0\\xA0traceId: action.traceId\"), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"start\",\n    \"x\": \"12.4524\",\n    \"y\": \"-186.8\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"})\"), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"95.8875\",\n    \"y\": \"-170\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \" \")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge8\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"pluginRunner->apiRunnerOnCreateNode\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M86.0329,-290.7432C86.9435,-283.0788 88.0595,-273.6854 89.2092,-264.0087\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"92.708,-264.2259 90.4123,-253.8827 85.7569,-263.3999 92.708,-264.2259\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node9\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"onCreateNode\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"185.8434,-36 39.9316,-36 39.9316,0 185.8434,0 185.8434,-36\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"112.8875\",\n    \"y\": \"-13.8\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"plugin.onCreateNode()\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"node11\",\n    \"className\": \"node\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"apiRunner2\"), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"points\": \"172.3995,-124.8 53.3755,-124.8 53.3755,-88.8 172.3995,-88.8 172.3995,-124.8\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"112.8875\",\n    \"y\": \"-102.6\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"api-runner-node.js\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge9\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"apiRunnerOnCreateNode->apiRunner2\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M103.6413,-161.7334C105.1513,-152.762 106.693,-143.6026 108.0737,-135.3994\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"111.5715,-135.7048 109.7799,-125.2625 104.6686,-134.5429 111.5715,-135.7048\"\n  }))), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge11\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"apiRunner2->apisRunning\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M151.3858,-88.6157C181.0113,-74.6224 222.096,-55.2164 253.7004,-40.2884\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"255.2152,-43.4438 262.7624,-36.008 252.2255,-37.1143 255.2152,-43.4438\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"250.8756\",\n    \"y\": \"-58.2\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"increment\")), mdx(\"g\", _extends({\n    parentName: \"g\"\n  }, {\n    \"id\": \"edge10\",\n    \"className\": \"edge\"\n  }), mdx(\"title\", {\n    parentName: \"g\"\n  }, \"apiRunner2->onCreateNode\"), mdx(\"path\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"none\",\n    \"stroke\": \"#000000\",\n    \"d\": \"M112.8875,-88.4006C112.8875,-76.2949 112.8875,-60.2076 112.8875,-46.4674\"\n  })), mdx(\"polygon\", _extends({\n    parentName: \"g\"\n  }, {\n    \"fill\": \"#000000\",\n    \"stroke\": \"#000000\",\n    \"points\": \"116.3876,-46.072 112.8875,-36.072 109.3876,-46.0721 116.3876,-46.072\"\n  })), mdx(\"text\", _extends({\n    parentName: \"g\"\n  }, {\n    \"textAnchor\": \"middle\",\n    \"x\": \"122.9927\",\n    \"y\": \"-58.2\",\n    \"fontFamily\": \"Times,serif\",\n    \"fontSize\": \"14.00\",\n    \"fill\": \"#000000\"\n  }), \"call\")))), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"The traceID is passed as an argument to the original API runner. E.g\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"apiRunner(`sourceNodes`, {\\n  traceId: `initial-sourceNodes`,\\n  waitForCascadingActions: true,\\n  parentSpan: parentSpan,\\n})\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"We keep track of the number of API calls with this traceId in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/utils/api-runner-node.js#L139\"\n  }), \"apisRunningByTraceId\"), \" Map. On this first invocation, it will be set to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"1\"), \".\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Using the action rebinding mentioned \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#injected-arguments\"\n  }), \"above\"), \", the traceId is passed through to all action calls via the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"actionOptions\"), \" object.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"After reducing the Action, a global event is \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/redux/index.js#L93\"\n  }), \"emitted\"), \" which includes the action information\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"For the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CREATE_NODE\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CREATE_PAGE\"), \" events, we need to call the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"onCreateNode\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"onCreatePage\"), \" APIs respectively. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/redux/plugin-runner.js\"\n  }), \"plugin-runner\"), \" takes care of this. It also passes on the traceId from the Action back into the API call.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"We\\u2019re back in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"api-runner-node.js\"), \" and can tie this new API call back to its original. So we increment the value of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/8029c6647ab38792bb0a7c135ab4b98ae70a2627/packages/gatsby/src/utils/api-runner-node.js#L218\"\n  }), \"apisRunningByTraceId\"), \" for this traceId.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now, whenever an API finishes running (when all its implementing plugins have finished), we decrement \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apisRunningByTraceId[traceId]\"), \". If the original API call included the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"waitForCascadingActions\"), \" option, then we wait until \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apisRunningByTraceId[traceId]\"), \" == 0 before resolving.\"))));\n}\n;\nMDXContent.isMDXComponent = true;",
        "excerpt": "For most sites, plugins take up the majority of the build time. So what's really happening when APIs are called? Note: this section only…",
        "timeToRead": 3,
        "tableOfContents": {
          "items": [
            {
              "url": "#early-in-the-build",
              "title": "Early in the build"
            },
            {
              "url": "#apiruninstance",
              "title": "apiRunInstance"
            },
            {
              "url": "#running-each-plugin",
              "title": "Running each plugin"
            },
            {
              "url": "#injected-arguments",
              "title": "Injected arguments"
            },
            {
              "url": "#waiting-for-all-plugins-to-run",
              "title": "Waiting for all plugins to run"
            },
            {
              "url": "#using-traceid-to-await-downstream-api-calls",
              "title": "Using traceID to await downstream API calls"
            }
          ]
        },
        "fields": {
          "slug": "/docs/how-plugins-apis-are-run/",
          "anchor": "how-plugins-apis-are-run"
        },
        "frontmatter": {
          "title": "How APIs/Plugins Are Run",
          "overview": null,
          "issue": null,
          "disableTableOfContents": null,
          "tableOfContentsDepth": null
        },
        "parent": {
          "__typename": "File",
          "relativePath": "docs/how-plugins-apis-are-run.md"
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/docs/how-plugins-apis-are-run/",
      "prev": {
        "title": "Gatsby Internals",
        "link": "/docs/gatsby-internals/"
      },
      "next": {
        "title": "Node Creation",
        "link": "/docs/node-creation/"
      }
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsMarkdownJs2546709735(\n  $path: String!\n) {\n  mdx(fields: {slug: {eq: $path}}) {\n    body\n    excerpt\n    timeToRead\n    tableOfContents\n    fields {\n      slug\n      anchor\n    }\n    frontmatter {\n      title\n      overview\n      issue\n      disableTableOfContents\n      tableOfContentsDepth\n    }\n    ...MarkdownPageFooterMdx\n  }\n}\n\nfragment MarkdownPageFooterMdx on Mdx {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}