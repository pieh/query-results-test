{
  "path": "/packages/gatsby-plugin-preload-fonts/",
  "result": {
    "data": {
      "markdownRemark": {
        "html": "<h1 id=\"gatsby-plugin-preload-fonts\"><a href=\"#gatsby-plugin-preload-fonts\" aria-label=\"gatsby plugin preload fonts permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-plugin-preload-fonts</h1>\n<p>This plugin preloads all necessary fonts per route to decrease time to first\nmeaningful paint. It works really well with services like Google Fonts that\nlink to stylesheets that in turn link to font files.</p>\n<h2 id=\"install\"><a href=\"#install\" aria-label=\"install permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save gatsby-plugin-preload-fonts</code></pre></div>\n<p>Once you’ve installed the plugin, you’ll want to add the included script\nto your project’s scripts in <code class=\"language-text\">package.json</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"preload-fonts\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-preload-fonts\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"how-to-use\"><a href=\"#how-to-use\" aria-label=\"how to use permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use</h2>\n<p>In your <code class=\"language-text\">gatsby-config.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-preload-fonts</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Before building your application, you will need to generate a font asset map\nusing the included <code class=\"language-text\">gatsby-preload-fonts</code> script.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run preload-fonts</code></pre></div>\n<p>You’ll need to run this script again after adding routes to your application\n(including new dynamic routes generated by source plugins), as well as any time\nyou add new font assets or stylesheets that link to font assets.</p>\n<p>This script outputs a file named <code class=\"language-text\">font-preload-cache.json</code> to the root of your\nproject. You will want to check this file into your project’s source control so\nall contributors have the latest version of the cache.</p>\n<p>You may pass any additional args to Puppeteer when running this script, like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run preload-fonts -- --no-sandbox</code></pre></div>\n<p>See <a href=\"#puppeteer\">Puppeteer</a> for more information.</p>\n<h2 id=\"explanation-of-method\"><a href=\"#explanation-of-method\" aria-label=\"explanation of method permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Explanation of method</h2>\n<p>A common pattern in modern web development is to link to a remote stylesheet that\nin turn links to other remote font assets. If it takes too long for the font to\nresolve/download, typography will either not show up or flash in a different\nsystem font before swapping out for the correct font.</p>\n<p>This can be avoided by preloading font assets on the initial page load instead of\nwaiting for them to resolve indirectly. In order to do this, <code class=\"language-text\">&lt;link rel=&quot;preload&quot;&gt;</code>\ntags will need to be added for each font asset required on each route at build time.</p>\n<p>To accomplish this, this plugin runs in two steps:</p>\n<ol>\n<li>Scrape each application route to determine what font assets are ultimately required.</li>\n<li>Inject <code class=\"language-text\">&lt;link rel=&quot;preload&quot;&gt;</code> tags for each asset at build time.</li>\n</ol>\n<p>The included <code class=\"language-text\">gatsby-preload-fonts</code> script spins up a <a href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a> instance and visits each of your application’s\nroutes to determine the required font assets. Once it has done so, it caches\nthis mapping and creates a unique scrape hash to help avoid rescraping the same\nset of routes in subsequent runs (note that you will still need to re-run the\nscraper if your application routes don’t change but you add new font assets).</p>\n<h2 id=\"configuration-options\"><a href=\"#configuration-options\" aria-label=\"configuration options permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuration options</h2>\n<p><strong><code class=\"language-text\">crossOrigin</code></strong> [boolean|string|function][default: `true`]</p>\n<p>Whether or not to include the <code class=\"language-text\">cross-origin</code> attribute on injected <code class=\"language-text\">&lt;link&gt;</code> tags. By default, this will be set to <code class=\"language-text\">anonymous</code> (this is usually correct).</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-preload-fonts</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        crossOrigin<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// OR</span>\n        crossOrigin<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">use-credentials</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// OR</span>\n        <span class=\"token function-variable function\">crossOrigin</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">pathname</span> <span class=\"token operator\">=></span>\n          pathname<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/^\\/elevated/</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">use-credentials</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">anonymous</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"troubleshooting\"><a href=\"#troubleshooting\" aria-label=\"troubleshooting permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Troubleshooting</h2>\n<p>If an asset isn’t showing up, this is likely due to its route not being scraped\nproperly. To insure that the route in question is being scraped, you have a couple\noptions. First, routes that don’t show up under the <code class=\"language-text\">allSitePage</code> query on your\nsite’s GraphQL server will not be scraped.</p>\n<p>If you’re still having trouble, you can run <code class=\"language-text\">gatsby-preload-fonts</code> with a lower\nlog level to view what paths it’s visiting in real time.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># mac/linux\nLOG_LEVEL=info npm run preload-fonts\n\n# windows\nset LOG_LEVEL=info &amp; npm run preload-fonts</code></pre></div>\n<p>Available log levels include <code class=\"language-text\">info</code>, <code class=\"language-text\">debug</code>, <code class=\"language-text\">warn</code>, <code class=\"language-text\">error</code>, and\n<code class=\"language-text\">silent</code>, respectively.</p>\n<h3 id=\"puppeteer\"><a href=\"#puppeteer\" aria-label=\"puppeteer permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Puppeteer</h3>\n<p>If you see a huge stack trace that looks like this</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(node:30511) UnhandledPromiseRejectionWarning: Error: Failed to launch chrome!\n[0705/172123.766471:FATAL:zygote_host_impl_linux.cc(116)] No usable sandbox! Update your kernel or see https://chromium.googlesource.com/chromium/src/+/master/docs/linux_suid_sandbox_development.md for more information on developing with the SUID sandbox. If you want to live dangerously and need an immediate workaround, you can try using --no-sandbox.\n...</code></pre></div>\n<p>you can pass the <code class=\"language-text\">--no-sandbox</code> flag to Puppeteer when you run the script:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run preload-fonts -- --no-sandbox</code></pre></div>\n<p>This comes with <a href=\"https://chromium.googlesource.com/chromium/src/+/master/docs/linux_suid_sandbox_development.md\">inherent security risks</a>,\nbut you should be alright since you’re only running it locally.</p>",
        "excerpt": "gatsby-plugin-preload-fonts This plugin preloads all necessary fonts per route to decrease time to first\nmeaningful paint. It works really…",
        "timeToRead": 3,
        "fields": {
          "title": "gatsby-plugin-preload-fonts"
        },
        "parent": {
          "__typename": "File",
          "relativePath": "gatsby-plugin-preload-fonts/README.md"
        }
      },
      "npmPackage": {
        "name": "gatsby-plugin-preload-fonts",
        "keywords": [
          "gatsby",
          "gatsby-plugin",
          "preload",
          "font",
          "typography"
        ],
        "lastPublisher": {
          "name": "sidharthachatterjee",
          "avatar": "https://gravatar.com/avatar/cb6abe87d0f9d4720bb60e336fc220d3"
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/packages/gatsby-plugin-preload-fonts/",
      "id": "e8f0514f-9adb-56f5-adc8-8cca8a9dd64b",
      "layout": "plugins"
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsLocalPackagesJs2742909928(\n  $slug: String!\n) {\n  markdownRemark(fields: {slug: {eq: $slug}}) {\n    html\n    excerpt\n    timeToRead\n    fields {\n      title\n    }\n    ...MarkdownPageFooter\n  }\n  npmPackage(slug: {eq: $slug}) {\n    name\n    keywords\n    lastPublisher {\n      name\n      avatar\n    }\n  }\n}\n\nfragment MarkdownPageFooter on MarkdownRemark {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}