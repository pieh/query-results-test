{
  "path": "/docs/how-shadowing-works/",
  "result": {
    "data": {
      "mdx": {
        "body": "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How Shadowing Works\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Shadowing is a powerful feature that allows theme users to override components,\\nobjects, and anything else in a theme\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src\"), \" directory.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note\"), \" This is a technical deep dive into how Shadowing works. If you\\u2019d\\nlike to learn about what Shadowing is, see the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/blog/2019-04-29-component-shadowing/\"\n  }), \"What is Component Shadowing?\"), \"\\nblog post.\")), mdx(\"p\", null, \"Shadowing works by using a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://webpack.js.org/api/resolvers/\"\n  }), \"webpack resolver plugin\"), \"\\nthat maps themes in a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config.js\"), \" to possible shadowed files. This gets\\nespecially mind melty because themes can add parent themes to a configuration so we\\nneed to be able to walk the composition of themes to determine the \\u201Clast shadow\\u201D\\nsince the last shadowed theme file wins in the algorithm.\"), mdx(\"h2\", {\n    \"id\": \"theme-composition\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#theme-composition\",\n    \"aria-label\": \"theme composition permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Theme Composition\"), mdx(\"p\", null, \"It\\u2019s important to begin discussing how the composition of themes works. An\\nend user of a theme can configure any number of themes. Each of these\\nthemes are considered sibling themes. Here is a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config.js\"), \" that\\nconfigures two sibling themes:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=gatsby-config.js\"\n  }), \"module.exports = {\\n  plugins: [\\n    \\\"gatsby-theme-tomato-blog\\\",\\n    \\\"gatsby-theme-tomato-portfolio\\\",\\n  ],\\n}\\n\")), mdx(\"p\", null, \"Both of the themes above (blog and portfolio) can install and configure\\nany other theme so we end up with a tree of themes which we call a theme\\ncomposition.\"), mdx(\"p\", null, \"The theme composition itself has a few properties:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"the last theme wins\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"a theme that uses another theme is the child theme\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"a theme that is used by another theme is the parent theme\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"theme trees are flattened during resolution\")), mdx(\"p\", null, \"These characteristics are what we use in the component shadowing algorithm\\nto decide which component to render. So, for example, if \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-tomato-blog\"), \"\\nhas \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gastby-theme-parent\"), \" as a parent theme we\\u2019d result in the following themes\\narray:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const themesArray = [\\n  \\\"gatsby-theme-parent\\\",\\n  \\\"gatsby-theme-tomato-blog\\\",\\n  \\\"gatsby-theme-tomato-portfolio\\\",\\n]\\n\")), mdx(\"p\", null, \"This means that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-tomato-portfolio\"), \" receives priority for\\ncomponent resolution, because it is last in the array.\"), mdx(\"h2\", {\n    \"id\": \"modifying-the-webpack-config\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#modifying-the-webpack-config\",\n    \"aria-label\": \"modifying the webpack config permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Modifying the webpack Config\"), mdx(\"p\", null, \"Component shadowing is a bit meta because it is implemented as an internal\\nGatsby plugin that applies a webpack plugin which modifies how module\\nresolution happens for files that are shadowed.\"), mdx(\"p\", null, \"The plugin consists of a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-node.js\"), \" and the webpack plugin code.\\nThe \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-node\"), \" file is pretty straightforward:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const GatsbyThemeComponentShadowingResolverPlugin = require(`.`)\\n\\nexports.onCreateWebpackConfig = (\\n  { store, stage, getConfig, rules, loaders, actions },\\n  pluginOptions\\n) => {\\n  const { themes, flattenedPlugins } = store.getState()\\n\\n  actions.setWebpackConfig({\\n    resolve: {\\n      plugins: [\\n        new GatsbyThemeComponentShadowingResolverPlugin({\\n          themes: themes.themes\\n            ? themes.themes\\n            : flattenedPlugins.map(plugin => {\\n                return {\\n                  themeDir: plugin.pluginFilepath,\\n                  themeName: plugin.name,\\n                }\\n              }),\\n        }),\\n      ],\\n    },\\n  })\\n}\\n\")), mdx(\"p\", null, \"We first check for themes in the redux store. This is for\\nbackwards-compatibility since themes are now merged with\\nplugins. If the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"themes\"), \" key was used in the user\\u2019s\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config.js\"), \" those are passed to the shadowing resolver\\nplugin. Otherwise, the flattened plugin list is passed.\"), mdx(\"h2\", {\n    \"id\": \"structure-of-a-webpack-plugin\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#structure-of-a-webpack-plugin\",\n    \"aria-label\": \"structure of a webpack plugin permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Structure of a webpack Plugin\"), mdx(\"p\", null, \"The webpack plugin itself has a constructor and an apply function which\\nwebpack calls as part of module resolution. We tie into the \\u201Crelative\\u201D\\nhook in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/webpack/enhanced-resolve/blob/5c1495a947060cf11106abc325b8adf1a0eff9b1/lib/ResolverFactory.js#L158\"\n  }), \"the\\npipeline\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=packages/gatsby/src/internal-plugins/webpack-theme-component-shadowing/index.js\"\n  }), \"module.exports = class GatsbyThemeComponentShadowingResolverPlugin {\\n  constructor({ projectRoot, themes }) {\\n    this.themes = themes\\n    this.projectRoot = projectRoot\\n  }\\n\\n  apply(resolver) {\\n    resolver.plugin(`relative`, (request, callback) => {\\n      // highlight-line\\n      // ...\\n    })\\n  }\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"get-matching-themes\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#get-matching-themes\",\n    \"aria-label\": \"get matching themes permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Get matching themes\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"request\"), \" contains the path of the file which we want to use to find\\npotential matches in themes.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"resolver.plugin(`relative`, (request, callback) => {\\n  const matchingThemes = this.getMatchingThemesForPath(request.path)\\n})\\n\")), mdx(\"p\", null, \"Which is defined on the class:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"module.exports = class GatsbyThemeComponentShadowingResolverPlugin {\\n  // ...\\n\\n  getMatchingThemesForPath(filepath) {\\n    // find out which theme's src/components dir we're requiring from\\n    const allMatchingThemes = this.themes.filter(({ themeName }) =>\\n      filepath.includes(path.join(themeName, `src`))\\n    )\\n\\n    // The same theme can be included twice in the themes list causing multiple\\n    // matches. This case should only be counted as a single match for that theme.\\n    return _.uniq(allMatchingThemes.map(({ themeName }) => themeName))\\n  }\\n\\n  // ...\\n}\\n\")), mdx(\"p\", null, \"This is run for all files in the site bundle and checks for potential matches.\\nSo, if a request is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/some/path/my-site/gatsby-theme-tomato/src/button/heading.js\"), \"\\nand \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-tomato\"), \" is installed on the site, we\\u2019ll return \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-tomato\"), \".\"), mdx(\"p\", null, \"We perform this match so that we can determine the theme that is being required\\nfrom so we can check for shadowed files in the user\\u2019s site or other themes to match\\nagainst. We also make sure the matched themes are unique because two themes can\\nbring in the same theme to the theme composition. When that\\u2019s the case we won\\u2019t worry\\nabout them being different. Though, it is important to note that when performing\\nresolution to build the site, the last theme added will always win.\"), mdx(\"h4\", {\n    \"id\": \"handle-too-many-matches\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#handle-too-many-matches\",\n    \"aria-label\": \"handle too many matches permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Handle too many matches\"), mdx(\"p\", null, \"Next, we check to make sure that if there is more than one matching theme there\\nis some sort of ambiguity and we should return an error. This can happen if there\\u2019s\\na path like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-blog/src/components/gatsby-theme-something/src/components\"), \"\\nin the project.\"), mdx(\"h4\", {\n    \"id\": \"no-matches\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#no-matches\",\n    \"aria-label\": \"no matches permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"No matches\"), mdx(\"p\", null, \"If there are no theme matches we return the invoked callback because there\\u2019s nothing\\nmore to do, time to let webpack continue on it\\u2019s way with module resolution.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"if (matchingThemes.length === 0) {\\n  return callback()\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"the-matched-theme\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#the-matched-theme\",\n    \"aria-label\": \"the matched theme permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"The matched theme\"), mdx(\"p\", null, \"Now, if we still haven\\u2019t returned the callback or thrown an error (due to ambiguity) it means we\\nhave a file being required from a theme. The file being required will look something\\nlike \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/some/path/my-site/gatsby-theme-tomato/src/box\"), \" and so the first thing we\\nwant to do is get the relative path for the file within the theme\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src\"), \" directory:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const [theme] = matchingThemes\\nconst [, component] = request.path.split(path.join(theme, `src`))\\n\")), mdx(\"p\", null, \"So, with the example path above we\\u2019ll end up with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/box\"), \". This can then be used to\\nsee if the user\\u2019s site or any other themes are shadowing the file.\"), mdx(\"h3\", {\n    \"id\": \"the-component-shadow\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#the-component-shadow\",\n    \"aria-label\": \"the component shadow permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"The component shadow\"), mdx(\"p\", null, \"Since a file from a theme is being required we need to figure out which path should\\nbe resolved for the requested component. We do this by calling \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"resolveComponentPath\"), \"\\nwhich uses the theming algorithm to attempt to find a shadowed component. If nothing\\nis found we return the original request which points at the original theme\\u2019s\\ncomponent.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const builtComponentPath = this.resolveComponentPath({\\n  matchingTheme: theme,\\n  themes: this.themes,\\n  component,\\n})\\n\\nreturn resolver.doResolve(\\n  `describedRelative`,\\n  { ...request, path: builtComponentPath || request.path },\\n  null,\\n  {},\\n  callback\\n)\\n\")), mdx(\"p\", null, \"We call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"doResolve\"), \" on the resolver which specifies the shadowed component path if\\none is found, otherwise the original request. This is what tells webpack to resolve\\nand bundle that particular file.\"), mdx(\"h4\", {\n    \"id\": \"resolving-a-shadowed-component\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#resolving-a-shadowed-component\",\n    \"aria-label\": \"resolving a shadowed component permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Resolving a shadowed component\"), mdx(\"p\", null, \"When looking for a component we perform a search that occurs in two locations:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"user\\u2019s project\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"themes\")), mdx(\"h5\", {\n    \"id\": \"users-project\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h5\"\n  }, {\n    \"href\": \"#users-project\",\n    \"aria-label\": \"users project permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"User\\u2019s project\"), mdx(\"p\", null, \"In order to ensure that the user\\u2019s project always takes precendence in terms of shadowing\\nit\\u2019s prepended to the theme list when attempting to resolve the component. This ensures that\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"my-site/src/gatsby-theme-tomato/box.js\"), \" will take priority over any other theme that\\nmight want to shadow the same component.\"), mdx(\"h5\", {\n    \"id\": \"themes\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h5\"\n  }, {\n    \"href\": \"#themes\",\n    \"aria-label\": \"themes permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Themes\"), mdx(\"p\", null, \"As discussed before, themes are flattened into a list and then all possible shadow\\npaths are constructed to match against. When concatenating with the user\\u2019s project it\\u2019s\\nimportant to note again that the themes array is reversed. This is how we ensure that\\n\\u201Cthe last theme wins\\u201D when resolving a shadowed file. We walk the list for matches\\nfrom start to finish.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const locationsToCheck = [\\n  // User's site\\n  path.join(path.resolve(`.`), `src`, theme),\\n].concat(\\n  Array.from(themes)\\n    // Last theme wins, so start matching reverse\\n    .reverse()\\n    // Create the full theme directory path to check against\\n    .map(({ themeDir }) => path.join(themeDir, `src`, theme))\\n)\\n\")), mdx(\"p\", null, \"Additionally, the original theme is removed because that\\u2019s the default\\nbehavior of webpack so we don\\u2019t need to resolve a theme to itself.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const themes = ogThemes.filter(({ themeName }) => themeName !== theme)\\n\")), mdx(\"h4\", {\n    \"id\": \"all-together\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#all-together\",\n    \"aria-label\": \"all together permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"All together\"), mdx(\"p\", null, \"The shadowing algorithm can be boiled down the following function that\\u2019s\\nroughly 20 lines of code:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"resolveComponentPath({\\n  matchingTheme: theme,\\n  themes: ogThemes,\\n  component,\\n}) {\\n  // don't include matching theme in possible shadowing paths\\n  const themes = ogThemes.filter(({ themeName }) => themeName !== theme)\\n  if (!this.cache[`${theme}-${component}`]) {\\n    this.cache[`${theme}-${component}`] = [\\n      path.join(path.resolve(`.`), `src`, theme),\\n    ]\\n      .concat(\\n        Array.from(themes)\\n          .reverse()\\n          .map(({ themeDir }) => path.join(themeDir, `src`, theme))\\n      )\\n      .map(dir => path.join(dir, component))\\n      .find(possibleComponentPath => {\\n        debug(`possibleComponentPath`, possibleComponentPath)\\n        let dir\\n        try {\\n          // we use fs/path instead of require.resolve to work with\\n          // TypeScript and alternate syntaxes\\n          dir = fs.readdirSync(path.dirname(possibleComponentPath))\\n        } catch (e) {\\n          return false\\n        }\\n        const exists = dir\\n          .map(filepath => {\\n            const ext = path.extname(filepath)\\n            const filenameWithoutExtension = path.basename(filepath, ext)\\n            return filenameWithoutExtension\\n          })\\n          .includes(\\n            path.basename(\\n              possibleComponentPath,\\n              path.extname(possibleComponentPath)\\n            )\\n          )\\n        return exists\\n      })\\n  }\\n\")), mdx(\"h3\", {\n    \"id\": \"handling-component-extending\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#handling-component-extending\",\n    \"aria-label\": \"handling component extending permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Handling component extending\"), mdx(\"p\", null, \"This is where things beging to get a bit whacky. In addition to overriding a file,\\nwe want it to be possible to import the very component you\\u2019re shadowing so that\\nyou can wrap it or even add props.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import React from \\\"react\\\"\\nimport { Author } from \\\"gatsby-theme-blog/src/components/author\\\"\\nimport Card from \\\"../components/card\\\"\\n\\nexport default props => (\\n  <Card>\\n    <Author {...props} />\\n  </Card>\\n)\\n\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/blog/2019-07-02-extending-components/\"\n  }), \"Learn more about extending components\")), mdx(\"p\", null, \"This is the first case we\\u2019ll handle when attempting to resolve the file.\"), mdx(\"p\", null, \"In order to do this we need to leverage the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"issuer\"), \" of the request. This points to\\nthe file that the request came from. This means it refers to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"where\"), \" the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"import\"), \" occurs.\\nThe \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"request\"), \" refers to what the import points to.\"), mdx(\"p\", null, \"This is implemented by another method on the plugin\\u2019s class which we call\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"requestPathIsIssuerShadowPath\"), \" which has the following method signature:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"requestPathIsIssuerShadowPath({\\n  theme,\\n  component,\\n  requestPath: request.path,\\n  issuerPath: request.context.issuer,\\n})\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"requestPathIsIssuerShadowPath\"), \" checks all possible directories for shadowing and\\nthen returns whether the issuer\\u2019s path is found. Let\\u2019s first take a look at the\\ncode and then unpack what\\u2019s happening here.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"requestPathIsIssuerShadowPath({ requestPath, issuerPath, theme }) {\\n  const shadowFiles = this.getBaseShadowDirsForThemes(theme).map(dir =>\\n    path.join(dir, component)\\n  )\\n\\n  return shadowFiles.includes(pathWithoutExtension(issuerPath))\\n}\\n\")), mdx(\"p\", null, \"In the above code block \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getBaseShadowDirsForThemes\"), \" returns:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const baseDirs = [\\n  \\\"/Users/johno/c/gatsby-theme-example-component-extending/gatsby-theme-rebeccapurple/src/gatsby-theme-tomato\\\",\\n  \\\"/Users/johno/c/gatsby-theme-example-component-extending/gatsby-theme-tomato/src\\\",\\n]\\n\")), mdx(\"p\", null, \"This constructs the shadowable files for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-tomato\"), \"\\u2019s Box component.\\nThen, we join the component path and end up with:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"const fullPaths = [\\n  \\\"/Users/johno/c/gatsby-theme-example-component-extending/gatsby-theme-rebeccapurple/src/gatsby-theme-tomato/box\\\",\\n  \\\"/Users/johno/c/gatsby-theme-example-component-extending/gatsby-theme-tomato/src/box\\\",\\n]\\n\")), mdx(\"p\", null, \"We then know that if the issuer \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"matches\"), \" one of these components that it\\u2019s\\nbeing extended. This means that a shadowed component is extending the same component\\nfrom its parent.\"), mdx(\"p\", null, \"When this happens we return the next path, so here the original location of the theme:\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/Users/johno/c/gatsby-theme-example-component-extending/gatsby-theme-tomato/src/box\"), \".\"), mdx(\"p\", null, \"This means that when our shadowed file imports Box from a shadowed file we return the\\noriginal box component defined in the theme.\"), mdx(\"p\", null, \"As a result, the following will work as we expect:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import React from \\\"react\\\"\\nimport Box from \\\"gatsby-theme-tomato/src/box\\\"\\nimport Card from \\\"../components/card\\\"\\n\\nexport default props => (\\n  <div style={{ padding: \\\"20px\\\", backgroundColor: \\\"rebeccapurple\\\" }}>\\n    <Box {...props} />\\n  </div>\\n)\\n\")), mdx(\"p\", null, \"Now, all usages of the Box in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-tomato\"), \" will be also wrapped in a purple\\nbox.\"), mdx(\"h4\", {\n    \"id\": \"an-edge-case\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#an-edge-case\",\n    \"aria-label\": \"an edge case permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"An edge case\"), mdx(\"p\", null, \"If a theme sets \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://webpack.js.org/configuration/resolve/#resolvemodules\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"module\"), \" config\"), \"\\nthe issuer will be null. As such we need to first check that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"request.context.issuer\"), \"\\nis present before we attempt to resolve the shadowed component.\"), mdx(\"p\", null, \"It\\u2019s important to note that we don\\u2019t recommend appending to the modules list in themes.\\nThough, if you do, we will make sure we don\\u2019t arbitrarily error.\"), mdx(\"h2\", {\n    \"id\": \"summary\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#summary\",\n    \"aria-label\": \"summary permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Summary\"), mdx(\"p\", null, \"Shadowing uses a predictable algorithm that leverages webpack to dynamically\\nchange module resolution based on a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config\"), \" and theme composition.\\nThe last theme will take precedence in the shadowing algorithm, and the\\nuser\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src\"), \" directory is always take into account first.\"));\n}\n;\nMDXContent.isMDXComponent = true;",
        "excerpt": "Shadowing is a powerful feature that allows theme users to override components,\nobjects, and anything else in a theme's  src  directoryâ€¦",
        "timeToRead": 5,
        "tableOfContents": {
          "items": [
            {
              "url": "#theme-composition",
              "title": "Theme Composition"
            },
            {
              "url": "#modifying-the-webpack-config",
              "title": "Modifying the webpack Config"
            },
            {
              "url": "#structure-of-a-webpack-plugin",
              "title": "Structure of a webpack Plugin",
              "items": [
                {
                  "url": "#get-matching-themes",
                  "title": "Get matching themes",
                  "items": [
                    {
                      "url": "#handle-too-many-matches",
                      "title": "Handle too many matches"
                    },
                    {
                      "url": "#no-matches",
                      "title": "No matches"
                    }
                  ]
                },
                {
                  "url": "#the-matched-theme",
                  "title": "The matched theme"
                },
                {
                  "url": "#the-component-shadow",
                  "title": "The component shadow",
                  "items": [
                    {
                      "url": "#resolving-a-shadowed-component",
                      "title": "Resolving a shadowed component",
                      "items": [
                        {
                          "url": "#users-project",
                          "title": "User's project"
                        },
                        {
                          "url": "#themes",
                          "title": "Themes"
                        }
                      ]
                    },
                    {
                      "url": "#all-together",
                      "title": "All together"
                    }
                  ]
                },
                {
                  "url": "#handling-component-extending",
                  "title": "Handling component extending",
                  "items": [
                    {
                      "url": "#an-edge-case",
                      "title": "An edge case"
                    }
                  ]
                }
              ]
            },
            {
              "url": "#summary",
              "title": "Summary"
            }
          ]
        },
        "fields": {
          "slug": "/docs/how-shadowing-works/",
          "anchor": "how-shadowing-works"
        },
        "frontmatter": {
          "title": "How Shadowing Works",
          "overview": null,
          "issue": null,
          "disableTableOfContents": null,
          "tableOfContentsDepth": null
        },
        "parent": {
          "__typename": "File",
          "relativePath": "docs/how-shadowing-works.mdx"
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/docs/how-shadowing-works/",
      "prev": {
        "title": "Security in Gatsby*",
        "link": "/docs/security-in-gatsby/"
      },
      "next": {
        "title": "Gatsby Internals",
        "link": "/docs/gatsby-internals/"
      }
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsMarkdownJs2546709735(\n  $path: String!\n) {\n  mdx(fields: {slug: {eq: $path}}) {\n    body\n    excerpt\n    timeToRead\n    tableOfContents\n    fields {\n      slug\n      anchor\n    }\n    frontmatter {\n      title\n      overview\n      issue\n      disableTableOfContents\n      tableOfContentsDepth\n    }\n    ...MarkdownPageFooterMdx\n  }\n}\n\nfragment MarkdownPageFooterMdx on Mdx {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}