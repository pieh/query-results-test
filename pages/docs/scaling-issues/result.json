{
  "path": "/docs/scaling-issues/",
  "result": {
    "data": {
      "mdx": {
        "body": "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Scaling Issues\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In certain circumstances, your application may hit some scaling issues that necessitate workarounds. These workarounds should be treated as \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"temporary\"), \" and should be revisited in the future as Gatsby scales to support larger applications with hundreds of thousands of pages.\"), mdx(\"p\", null, \"However \\u2014 until we get to that point, some workarounds are useful to consider if they unblock your team from deploying, developing, etc.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Just looking for possible solutions? \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#possible-solutions-to-scaling-issues\"\n  }), \"Jump ahead\"))), mdx(\"h2\", {\n    \"id\": \"what-is-a-scaling-issue\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#what-is-a-scaling-issue\",\n    \"aria-label\": \"what is a scaling issue permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"What is a scaling issue?\"), mdx(\"p\", null, \"A scaling issue is evident if your application is unable to build due to an error \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"or\"), \" if it is extremely slow in some lifecycle, e.g. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"develop\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build\"), \". For example:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"An \\u201COut of Memory\\u201D occurs when building in CI\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"develop\"), \" lifecycle takes 10x as long as \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"build\"))), mdx(\"p\", null, \"and more. An example of a scaling error thrown to the console may look something like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"success open and validate gatsby-configs \\u2014 0.005 s\\nsuccess load plugins \\u2014 0.131 s\\nsuccess onPreInit \\u2014 0.283 s\\nsuccess initialize cache \\u2014 0.026 s\\nsuccess copy gatsby files \\u2014 0.071 s\\nsuccess onPreBootstrap \\u2014 0.009 s\\nsuccess source and transform nodes \\u2014 5.291 s\\nsuccess building schema \\u2014 0.623 s\\nsuccess createPages \\u2014 0.608 s\\nsuccess createPagesStatefully \\u2014 0.025 s\\nsuccess onPreExtractQueries \\u2014 0.000 s\\nsuccess update schema \\u2014 0.478 s\\nsuccess extract queries from components \\u2014 0.127 s\\n\\u2804 run graphql queries \\u2014 310/728 2.51 queries/second\\n<--- Last few GCs --->\\n\\n[10208:0000029380BC1810]   139036 ms: Scavenge 1374.2 (1423.1) -> 1373.3 (1424.1) MB, 2.2 / 0.0 ms  (average mu = 0.317, current mu = 0.262) allocation failure\\n[10208:0000029380BC1810]   139039 ms: Scavenge 1374.3 (1424.1) -> 1373.5 (1424.6) MB, 2.0 / 0.0 ms  (average mu = 0.317, current mu = 0.262) allocation failure\\n[10208:0000029380BC1810]   139043 ms: Scavenge 1374.4 (1424.6) -> 1373.6 (1425.1) MB, 2.1 / 0.0 ms  (average mu = 0.317, current mu = 0.262) allocation failure\\n\")), mdx(\"h2\", {\n    \"id\": \"when-can-a-scaling-issue-arise\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#when-can-a-scaling-issue-arise\",\n    \"aria-label\": \"when can a scaling issue arise permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"When can a scaling issue arise?\"), mdx(\"p\", null, \"A scaling issue \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"can\"), \" arise in varied cases, but typically something like:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A Gatsby application with ~100K+ pages\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"See \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/issues/12343\"\n  }), \"this issue\"), \" for an example\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Extremely large \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"json\"), \" files sourced with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"gatsby-transformer-json\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Extremely large GraphQL queries, which are stored in memory in the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"develop\"), \" lifecycle\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"See \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/issues/12566\"\n  }), \"this issue\"), \" for an example\")))), mdx(\"p\", null, \"If you are seeing errors or slowness \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"and\"), \" your Gatsby app matches one of the above use-cases, it\\u2019s very likely you are hitting some scaling issues.\"), mdx(\"h2\", {\n    \"id\": \"possible-solutions-to-scaling-issues\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#possible-solutions-to-scaling-issues\",\n    \"aria-label\": \"possible solutions to scaling issues permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Possible solutions to scaling issues\"), mdx(\"p\", null, \"It\\u2019s difficult to pin down exactly \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"how\"), \" to fix a scaling issue. We have some recommendations and workarounds that \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"may\"), \" work for your application.\"), mdx(\"p\", null, \"Note: the application of these techniques should be considered analogous to a applying a bandage. A bandage solves the underlying issue, but at some indeterminate point in the future the underlying issue may be healed! In much the same way\\u2014treat these techniques as temporary and re-visit in the future if underlying scaling issues in Gatsby have since been resolved.\"), mdx(\"h3\", {\n    \"id\": \"gatsby_db_nodes\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#gatsby_db_nodes\",\n    \"aria-label\": \"gatsby_db_nodes permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"GATSBY_DB_NODES\")), mdx(\"p\", null, \"In preparation for future versions of Gatsby, we\\u2019ve enabled \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"experimental\"), \" support for a different mechanism for the persistence of nodes: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/lokijs\"\n  }), \"Loki\"), \". It\\u2019s challenging to assess whether this could lead to unforeseen issues without breaking changes, so we\\u2019ve exposed it behind a flag while we continue to assess the impact to Gatsby applications.\"), mdx(\"p\", null, \"Loki allows us to opt-in to possibly more performant internal operations and it \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"may\"), \" resolve your scaling issues. If it does\\u2014please let us know! To opt-in to this experimental feature:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"devDependencies\\\": {\\n    \\\"cross-env\\\": \\\"^5.2.0\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"build\\\": \\\"cross-env GATSBY_DB_NODES=loki gatsby build\\\"\\n  }\\n}\\n\")), mdx(\"h3\", {\n    \"id\": \"switch-off-type-inference-for-sitepagecontext\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#switch-off-type-inference-for-sitepagecontext\",\n    \"aria-label\": \"switch off type inference for sitepagecontext permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Switch off type inference for \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"SitePage.context\")), mdx(\"p\", null, \"When using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"createPages\"), \" API to pass large amounts of data to pages via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"context\"), \" (which is generally not recommended), Gatsby\\u2019s type inference can become slow. In most cases, it is not actually necessary to include the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SitePage.context\"), \" field in the GraphQL schema, so switching off type inference for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SitePage\"), \" type should be safe:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// gatsby-node.js\\nexports.createSchemaCustomization = ({ actions }) => {\\n  actions.createTypes(`\\n    type SitePage implements Node @dontInfer {\\n      path: String!\\n    }\\n  `)\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;",
        "excerpt": "In certain circumstances, your application may hit some scaling issues that necessitate workarounds. These workarounds should be treated as…",
        "timeToRead": 2,
        "tableOfContents": {
          "items": [
            {
              "url": "#what-is-a-scaling-issue",
              "title": "What is a scaling issue?"
            },
            {
              "url": "#when-can-a-scaling-issue-arise",
              "title": "When can a scaling issue arise?"
            },
            {
              "url": "#possible-solutions-to-scaling-issues",
              "title": "Possible solutions to scaling issues",
              "items": [
                {
                  "url": "#gatsby_db_nodes",
                  "title": "GATSBY_DB_NODES"
                },
                {
                  "url": "#switch-off-type-inference-for-sitepagecontext",
                  "title": "Switch off type inference for SitePage.context"
                }
              ]
            }
          ]
        },
        "fields": {
          "slug": "/docs/scaling-issues/",
          "anchor": "scaling-issues"
        },
        "frontmatter": {
          "title": "Scaling Issues",
          "overview": null,
          "issue": null,
          "disableTableOfContents": null,
          "tableOfContentsDepth": null
        },
        "parent": {
          "__typename": "File",
          "relativePath": "docs/scaling-issues.md"
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/docs/scaling-issues/",
      "prev": {
        "title": "Optimizing Site Performance with Guess.js",
        "link": "/docs/optimizing-site-performance-with-guessjs/",
        "breadcrumbTitle": "Guess.js"
      },
      "next": {
        "title": "Localization and Internationalization with Gatsby",
        "link": "/docs/localization-i18n/",
        "breadcrumbTitle": "Localization"
      }
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsMarkdownJs2546709735(\n  $path: String!\n) {\n  mdx(fields: {slug: {eq: $path}}) {\n    body\n    excerpt\n    timeToRead\n    tableOfContents\n    fields {\n      slug\n      anchor\n    }\n    frontmatter {\n      title\n      overview\n      issue\n      disableTableOfContents\n      tableOfContentsDepth\n    }\n    ...MarkdownPageFooterMdx\n  }\n}\n\nfragment MarkdownPageFooterMdx on Mdx {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}