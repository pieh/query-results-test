{
  "path": "/packages/gatsby-source-google-photos/",
  "result": {
    "data": {
      "markdownRemark": null,
      "npmPackage": {
        "name": "gatsby-source-google-photos",
        "description": "Source plugin that provides Google Photos API endpoints in Gatsby",
        "keywords": [
          "gatsby",
          "gatsby-plugin",
          "source",
          "google-photos",
          "source-google-photos",
          "photos"
        ],
        "lastPublisher": {
          "name": "tinavanschelt",
          "avatar": "https://gravatar.com/avatar/b6573a0caf2518b7d26dabaaec84318f"
        },
        "repository": null,
        "readme": {
          "childMarkdownRemark": {
            "html": "<h1 id=\"gatsby-source-google-photos\"><a href=\"#gatsby-source-google-photos\" aria-label=\"gatsby source google photos permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby-Source-Google-Photos</h1>\n<h4 id=\"important\"><a href=\"#important\" aria-label=\"important permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><em>IMPORTANT</em></h4>\n<p><em>Google Photos refreshes the baseUrl after 60 minutes, in other words, your images will only be visible for an hour. I wanted to make this work as I had a bunch of travel pictures on google photos that I didn’t want to migrate, but the platform just isn’t intended for hosting images. I’m archiving this repo and migrating the gallery component over to Cloudinary.</em></p>\n<p>A <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> plugin for sourcing photos from specific albums in your Google Photos Library and creating <code class=\"language-text\">GooglePhoto</code> nodes.</p>\n<h2 id=\"requirements-for-getting-started\"><a href=\"#requirements-for-getting-started\" aria-label=\"requirements for getting started permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Requirements for getting started</h2>\n<p>In order to use this plugin you need to create a project and get a <code class=\"language-text\">Client ID</code> and <code class=\"language-text\">Client secret</code> from the <a href=\"https://console.developers.google.com/apis/library?project=pragmatic-mote-231017&#x26;folder&#x26;organizationId\">Google API Console</a>. To obtain the necessary credentials follow the “Configure your app” <a href=\"https://developers.google.com/photos/library/guides/get-started#configure-app\">instructions</a> in the <strong>Get started with REST</strong> section of the Google Photos API docs.</p>\n<h2 id=\"install\"><a href=\"#install\" aria-label=\"install permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install</h2>\n<p><code class=\"language-text\">npm install --save gatsby-source-google-photos</code></p>\n<h2 id=\"setup\"><a href=\"#setup\" aria-label=\"setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h2>\n<ol>\n<li>\n<p>Setup environment variables</p>\n<p>1.1 Create a <code class=\"language-text\">.env</code> file in the root of your project and specify your environment variables (obtained from the Google API Console) as follows</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GOOGLE_CLIENT_ID=XXXXXXXXXX\nGOOGLE_CLIENT_SECRET=XXXXXXXXXX</code></pre></div>\n<p>1.2 Add <code class=\"language-text\">require(&quot;dotenv&quot;).config()</code> to the top your <code class=\"language-text\">gatsby-config.js</code></p>\n<p>1.3 Remember to add .env to your <code class=\"language-text\">.gitignore</code> file</p>\n</li>\n</ol>\n<p>Now you should be able to access your environment variables using <code class=\"language-text\">process.env.VARIABLE_NAME</code> in <code class=\"language-text\">gatsby-config.js</code>. In our case that’s <code class=\"language-text\">GOOGLE_CLIENT_ID</code> and <code class=\"language-text\">GOOGLE_CLIENT_SECRET</code>.</p>\n<ol start=\"2\">\n<li>Add your <code class=\"language-text\">gatsby-source-google-photos</code> configuration to <code class=\"language-text\">gatsby-config.js</code></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// gatsby-config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-source-google-photos</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        clientId<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GOOGLE_CLIENT_ID</span><span class=\"token punctuation\">,</span>\n        clientSecret<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">GOOGLE_CLIENT_SECRET</span><span class=\"token punctuation\">,</span>\n        albums<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'album-name-one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'album-name-two'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token comment\">// if you only have one album pass it as an array</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"how-to-use\"><a href=\"#how-to-use\" aria-label=\"how to use permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use</h2>\n<p>Query all photos</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> photoQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query photoQuery {\n    googlePhotos: allGooglePhoto {\n      edges {\n        node {\n          id\n          album\n          baseUrl\n          filename\n        }\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n<p>Filter by filename</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">allGooglePhoto</span><span class=\"token punctuation\">(</span>filter<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> filename<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> eq<span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Filter by albumTitle</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">allGooglePhoto</span><span class=\"token punctuation\">(</span>filter<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> albumTitle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> eq<span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>All the <code class=\"language-text\">mediaItem</code> properties <a href=\"https://developers.google.com/photos/library/guides/access-media-items#media-items\">outlined in the Google Photos API</a> are available on the GooglePhoto node, with the addition of <code class=\"language-text\">albumTitle</code>.</p>\n<h2 id=\"example-usage\"><a href=\"#example-usage\" aria-label=\"example usage permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example usage</h2>\n<p>I use <a href=\"https://github.com/rhysd/rehype-react\">rehype-react</a> to render a gallery component (<a href=\"https://github.com/tinavanschelt/gatsby-google-photos-gallery\">https://github.com/tinavanschelt/gatsby-google-photos-gallery</a>) within my markdown files</p>\n<p>Example using gatsby-starter-blog, gatsby-source-google-photos and gatsby-google-photos-gallery: <a href=\"https://github.com/tinavanschelt/gatsby-google-photos-gallery-example\">https://github.com/tinavanschelt/gatsby-google-photos-gallery-example</a></p>\n<h2 id=\"caveats\"><a href=\"#caveats\" aria-label=\"caveats permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caveats</h2>\n<p>I encountered a couple of limitations whilst patching this thing together.</p>\n<ol>\n<li><strong>OAuth</strong>: The only way to authorize a Google Photos API request is via OAuth, that means that the user (you) has to grant access when the initial build is running, which can complicate things when deploying. I build my site locally and then simply drag the folder to Netlify as outlined <a href=\"https://www.gatsbyjs.org/docs/hosting-on-netlify\">here</a>.</li>\n<li><strong>Filters</strong>: Currently, the Google Photos API does not support simultaneously specifing an albumId and a mediaType filter. Issue being tracked <a href=\"https://issuetracker.google.com/issues/116541300\">here</a>. We get the mediaItems in a specific album and the filter out the photos afterwards.</li>\n</ol>\n<h2 id=\"dependencies-and-kudos\"><a href=\"#dependencies-and-kudos\" aria-label=\"dependencies and kudos permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dependencies and Kudos</h2>\n<p>The plugin makes use of</p>\n<ul>\n<li><a href=\"https://github.com/axios/axios\">axios</a> for API requests</li>\n<li><a href=\"https://github.com/lelylan/simple-oauth2\">simple-oauth2</a> for authentication</li>\n<li><a href=\"https://github.com/chalk/chalk\">chalk</a> for syntax highlighting</li>\n</ul>\n<p>The <a href=\"https://github.com/sineau/gatsby-source-mautic\">gatsby-source-mautic</a> plugin served as a very valuable reference for the OAuth flow</p>",
            "timeToRead": 3
          }
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/packages/gatsby-source-google-photos/",
      "id": "7c38b434-c969-55e5-85f0-854b1e1f7781",
      "layout": "plugins"
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsRemotePackagesJs803499274(\n  $slug: String!\n) {\n  markdownRemark(fields: {slug: {eq: $slug}}) {\n    ...MarkdownPageFooter\n  }\n  npmPackage(slug: {eq: $slug}) {\n    name\n    description\n    keywords\n    lastPublisher {\n      name\n      avatar\n    }\n    repository {\n      url\n    }\n    readme {\n      childMarkdownRemark {\n        html\n        timeToRead\n      }\n    }\n  }\n}\n\nfragment MarkdownPageFooter on MarkdownRemark {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}