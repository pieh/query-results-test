{
  "path": "/docs/end-to-end-testing/",
  "result": {
    "data": {
      "mdx": {
        "body": "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"End-to-End Testing\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.cypress.io/\"\n  }), \"Cypress\"), \" is one of the options when it comes to end-to-end (E2E) testing. Cypress is an all-in-one testing framework focused on E2E testing, meaning that you don\\u2019t have to install 10 different things to get your test suite set up. You can write your first passing test in minutes without any configuration with the help of Cypress\\u2019 API, which is easy to read and understand. It runs tests as fast as your browser can render content, which also makes test-driven development possible. You\\u2019ll also profit from the time travel feature or the extensive debugging capabilities with Chrome DevTools. Of course you can also use it with Gatsby, and this guide will explain how.\"), mdx(\"p\", null, \"In order to run Gatsby\\u2019s development server and Cypress at the same time you\\u2019ll use the little helper \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/bahmutov/start-server-and-test\"\n  }), \"start-server-and-test\"), \". If you\\u2019re already using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/testing-library/react-testing-library\"\n  }), \"@testing-library/react\"), \" for \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/unit-testing\"\n  }), \"unit testing\"), \" you might want to install \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/testing-library/cypress-testing-library\"\n  }), \"@testing-library/cypress\"), \", too. This way you can use the exact same methods you used with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@testing-library/react\"), \" in your Cypress tests. Install the following packages to your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"devDependencies\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"npm install --save-dev cypress start-server-and-test\\n\")), mdx(\"p\", null, \"We also want the URLs used by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy.visit()\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy.request()\"), \" to be prefixed, hence you have to create the file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress.json\"), \" at the root of your project with the following content:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json:title=cypress.json\"\n  }), \"{\\n  \\\"baseUrl\\\": \\\"http://localhost:8000/\\\"\\n}\\n\")), mdx(\"p\", null, \"Last but not least you add additional scripts to your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" to run Cypress:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json:title=package.json\"\n  }), \"{\\n  \\\"scripts\\\": {\\n    \\\"develop\\\": \\\"gatsby develop\\\",\\n    // highlight-start\\n    \\\"cy:open\\\": \\\"cypress open\\\",\\n    \\\"test:e2e\\\": \\\"start-server-and-test develop http://localhost:8000 cy:open\\\"\\n    // highlight-end\\n  }\\n}\\n\")), mdx(\"p\", null, \"Run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"test:e2e\"), \" in your command line and see Cypress running for the first time. A folder named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress\"), \" will be created at the root of your project and a new application window will pop up. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.cypress.io/guides/getting-started/writing-your-first-test.html#\"\n  }), \"Cypress\\u2019 getting started guide\"), \" is a good start to learn how to write tests!\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Important note\"), \": If you are running Gatsby with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--https\"), \" flag, whether using your own or automatically generated certificates, you will also need to tell \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"start-server-and-test\"), \" to disable HTTPS certificate checks (otherwise it will wait forever and never actually launch Cypress. You do this by passing in an environmental variable: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"START_SERVER_AND_TEST_INSECURE=1\"), \". \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/bahmutov/start-server-and-test#disable-https-certificate-checks\"\n  }), \"start-server-and-test docs\"), \".\"), mdx(\"p\", null, \"This means your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"test:e2e\"), \" script would look like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json:title=package.json\"\n  }), \"\\\"test:e2e\\\": \\\"START_SERVER_AND_TEST_INSECURE=1 start-server-and-test develop http://localhost:8000 cy:open\\\"\\n\")), mdx(\"h3\", {\n    \"id\": \"continuous-integration\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#continuous-integration\",\n    \"aria-label\": \"continuous integration permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Continuous Integration\"), mdx(\"p\", null, \"If you want to run Cypress in Continuous Integration (CI) you have to use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress run\"), \" instead of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress open\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json:title=package.json\"\n  }), \"{\\n  \\\"scripts\\\": {\\n    \\\"develop\\\": \\\"gatsby develop\\\",\\n    \\\"cy:open\\\": \\\"cypress open\\\",\\n    \\\"cy:run\\\": \\\"cypress run\\\", // highlight-line\\n    \\\"test:e2e\\\": \\\"start-server-and-test develop http://localhost:8000 cy:open\\\",\\n    \\\"test:e2e:ci\\\": \\\"start-server-and-test develop http://localhost:8000 cy:run\\\" // highlight-line\\n  }\\n}\\n\")), mdx(\"p\", null, \"Please read the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.cypress.io/guides/guides/continuous-integration.html\"\n  }), \"Cypress\\u2019 official documentation\"), \" on CI if you want to know how to setup Travis or GitLab with Cypress.\"), mdx(\"h2\", {\n    \"id\": \"writing-tests\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#writing-tests\",\n    \"aria-label\": \"writing tests permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Writing tests\"), mdx(\"p\", null, \"A good use case for writing automated end-to-end tests is asserting \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"accessibility\"), \" with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/avanslaars/cypress-axe\"\n  }), \"cypress-axe\"), \", a Cypress plugin that incorporates the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://deque.com/axe\"\n  }), \"axe\"), \" accessibility testing API. While some \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.smashingmagazine.com/2018/09/importance-manual-accessibility-testing/\"\n  }), \"manual testing\"), \" is still required to ensure good web accessibility, automation can ease the burden on human testers.\"), mdx(\"p\", null, \"To use cypress-axe you have to install \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress-axe\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/dequelabs/axe-core\"\n  }), \"axe-core\"), \". You\\u2019ll also use some commands from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://testing-library.com/docs/cypress-testing-library/intro\"\n  }), \"@testing-library/cypress\"), \" to target elements easier:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"npm install --save-dev cypress-axe axe-core @testing-library/cypress\\n\")), mdx(\"p\", null, \"Then you add the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress-axe\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@testing-library/cypress\"), \" commands in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress/support/commands.js\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=cypress/support/commands.js\"\n  }), \"import \\\"./commands\\\"\\n//highlight-start\\nimport \\\"cypress-axe\\\"\\nimport \\\"@testing-library/cypress/add-commands\\\"\\n//highlight-end\\n\")), mdx(\"p\", null, \"Cypress right now will look for tests inside the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress/integration\"), \" folder. It makes sense to create a new folder \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress/e2e\"), \" (end to end). You can use that folder for tests by adding the following in your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress.json\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json:title=cypress.json\"\n  }), \"{\\n  \\\"baseUrl\\\": \\\"http://localhost:8000/\\\"\\n  \\\"integrationFolder\\\": \\\"cypress/e2e\\\" // highlight-line\\n}\\n\")), mdx(\"p\", null, \"Create a new file inside \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress/e2e\"), \" folder and name it \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"a11y.test.js\"), \".\"), mdx(\"p\", null, \"You\\u2019ll use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"beforeEach\"), \" hook to run some commands before each test. After cypress loads the homepage you\\u2019ll use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"checkA11y\"), \" method from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cypress-axe\"), \" to check for accessibility violations:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=cypress/e2e/a11y.test.js\"\n  }), \"/// <reference types=\\\"Cypress\\\" />\\n\\ndescribe(\\\"Accessibility checks\\\", () => {\\n  beforeEach(() => {\\n    cy.visit(\\\"/\\\")\\n    cy.injectAxe()\\n    cy.wait(500)\\n  })\\n  it(\\\"Has no detectable a11y violations on load\\\", () => {\\n    cy.checkA11y()\\n  })\\n})\\n\")), mdx(\"p\", null, \"You can run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"test:e2e\"), \" to run the test. If you already have the development server open you can run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy:open\"), \" instead.\"), mdx(\"p\", null, \"One thing to keep in mind is that you can\\u2019t always see the exact error message from the sidebar (command log). For that, you have to open the browser developer console and find the message in the output. You can see how an accessibility error looks in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/avanslaars/cypress-axe#output\"\n  }), \"cypress-axe GitHub page\"), \".\"), mdx(\"p\", null, \"You don\\u2019t have to use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"checkA11y\"), \" method only on page load. For example, you can perform a click on a button and check again. This is especially useful if that button opens a modal or a mobile menu for example.\"), mdx(\"p\", null, \"The following test is for the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby-starter-default\"\n  }), \"gatsby-default-starter\"), \". Cypress visits the homepage and searches for the link that goes to page 2 with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getByText\"), \" command. Then, performs a click event on that link and checks for accessibility errors on the second page.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=cypress/e2e/a11y.test.js\"\n  }), \"/// <reference types=\\\"Cypress\\\" />\\n\\ndescribe(\\\"Accessibility checks\\\", () => {\\n  beforeEach(() => {\\n    cy.visit(\\\"/\\\")\\n    cy.injectAxe()\\n    cy.wait(500)\\n  })\\n  it(\\\"Has no detectable a11y violations on load\\\", () => {\\n    cy.checkA11y()\\n  })\\n  // highlight-start\\n  it(\\\"Navigates to page 2 and checks for accessibility violations\\\", () => {\\n    cy.getByText(/go to page 2/i)\\n      .click()\\n      .checkA11y()\\n  })\\n  // highlight-end\\n})\\n\")), mdx(\"p\", null, \"You can also make \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.cypress.io/guides/core-concepts/introduction-to-cypress.html#Assertions\"\n  }), \"assertions\"), \" with the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.cypress.io/api/commands/should.html#Syntax\"\n  }), \"should command\"), \".\"), mdx(\"p\", null, \"In \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-default-starter\"), \" homepage you can write another test that focuses on the footer link. Then you make some assertions on the item that\\u2019s currently focused:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=cypress/e2e/a11y.test.js\"\n  }), \"/// <reference types=\\\"Cypress\\\" />\\n\\ndescribe(\\\"Accessibility checks\\\", () => {\\n  beforeEach(() => {\\n    cy.visit(\\\"/\\\")\\n    cy.injectAxe()\\n    cy.wait(500)\\n  })\\n  it(\\\"Has no detectable a11y violations on load\\\", () => {\\n    cy.checkA11y()\\n  })\\n  it(\\\"Navigates to page 2 and checks for accessibility violations\\\", () => {\\n    cy.getByText(/go to page 2/i)\\n      .click()\\n      .checkA11y()\\n  })\\n  // highlight-start\\n  it(\\\"Checks if footer link is focusable and has the correct attributes\\\", () => {\\n    cy.getAllByText(\\\"Gatsby\\\").focus()\\n\\n    cy.focused()\\n      .should(\\\"have.text\\\", \\\"Gatsby\\\")\\n      .should(\\\"have.attr\\\", \\\"href\\\", \\\"https://www.gatsbyjs.org\\\")\\n      .should(\\\"not.have.css\\\", \\\"outline-width\\\", \\\"0px\\\")\\n  })\\n  // highlight-end\\n})\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;",
        "excerpt": "Cypress  is one of the options when it comes to end-to-end (E2E) testing. Cypress is an all-in-one testing framework focused on E2E testing…",
        "timeToRead": 3,
        "tableOfContents": {
          "items": [
            {
              "items": [
                {
                  "url": "#continuous-integration",
                  "title": "Continuous Integration"
                }
              ]
            },
            {
              "url": "#writing-tests",
              "title": "Writing tests"
            }
          ]
        },
        "fields": {
          "slug": "/docs/end-to-end-testing/",
          "anchor": "end-to-end-testing"
        },
        "frontmatter": {
          "title": "End-to-End Testing",
          "overview": null,
          "issue": null,
          "disableTableOfContents": null,
          "tableOfContentsDepth": null
        },
        "parent": {
          "__typename": "File",
          "relativePath": "docs/end-to-end-testing.md"
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/docs/end-to-end-testing/",
      "prev": {
        "title": "Testing Components with GraphQL",
        "link": "/docs/testing-components-with-graphql/"
      },
      "next": {
        "title": "Testing CSS-in-JS",
        "link": "/docs/testing-css-in-js/"
      }
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsMarkdownJs2546709735(\n  $path: String!\n) {\n  mdx(fields: {slug: {eq: $path}}) {\n    body\n    excerpt\n    timeToRead\n    tableOfContents\n    fields {\n      slug\n      anchor\n    }\n    frontmatter {\n      title\n      overview\n      issue\n      disableTableOfContents\n      tableOfContentsDepth\n    }\n    ...MarkdownPageFooterMdx\n  }\n}\n\nfragment MarkdownPageFooterMdx on Mdx {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}