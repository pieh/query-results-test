{
  "path": "/docs/performance-tracing/",
  "result": {
    "data": {
      "mdx": {
        "body": "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Performance tracing\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Gatsby allows a build to be traced, enabling you to find which plugins or parts of the build are taking the longest. The trace information can be viewed in any \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://opentracing.io/\"\n  }), \"OpenTracing\"), \" compatible tool such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.jaegertracing.io/\"\n  }), \"Jaeger\"), \". You can also use Zipkin compatible tools such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://zipkin.io/\"\n  }), \"Zipkin\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.honeycomb.io/\"\n  }), \"Honeycomb\"), \".\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/docs/performance-tracing/#running-gatsby-with-tracing-turned-on\"\n  }), \"Running Gatsby with tracing turned on\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/docs/performance-tracing/#tracing-backend-examples\"\n  }), \"Tracing backend examples\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/docs/performance-tracing/#adding-your-own-tracing\"\n  }), \"Adding your own tracing\"))), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"786px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/6b72ac52b16999da1086e239fc47d3e6/2fb56/zipkin-trace.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"58.41666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABxklEQVQoz41STW+bQBDl/99qjBXbPyDqocYE5VS1Jx/SeysfGrUKYJvEwhjYL5aP19l14yQOh4z0NG9m4THzWMd1x3BdF6PRJ3ieR3lkcXU1xXw+x2w2xXQ6w3jsYey9wDw7mUzsu6vVCkkc4/P1NZwwDGGwDG8R3NzAXy4JARb+El8WCyyIh9RfUj8IgnfwfR8/7u7w89caX799hwOKbP+E31GKvCjBlYZQNWTdoGICQuMD0WNfcMgOcLTWWN//QX7IIKVEXdcWFWMQVJteWVbn2mRTG844R1GWEEJCKUmZw2m7HsF6B0Xq0dZMukN6KJEzibYHGurXTYu67Yj3xDtbG67bE9f0oDnXxO3KDzm3DSYU7uMUERmcZRkYTSOlsCt9NKxgfBRQpG6i6Tr83TxikyQoigId1X3fDwCDfSsYHflJsD9NwmSNh3iD7XZjPbS2mxfwIoIL/lyfJzTePDdNJI97xFGMNE3JbHH+GAYE300YF8J6+Fqw4oK8TGjKHZr/dlyuPOihOYxoQn0haO7i9ilDdqxwKBgOJQNTzRvkJUdW0DllUyvdnAS5btGd18CrlWB/SksY+jlN29qrYrK5fqrW+Ac8WITzncaKVgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Example Zipkin Trace\",\n    \"title\": \"Example Zipkin Trace\",\n    \"src\": \"/static/6b72ac52b16999da1086e239fc47d3e6/73d01/zipkin-trace.png\",\n    \"srcSet\": [\"/static/6b72ac52b16999da1086e239fc47d3e6/a3b1f/zipkin-trace.png 197w\", \"/static/6b72ac52b16999da1086e239fc47d3e6/07137/zipkin-trace.png 393w\", \"/static/6b72ac52b16999da1086e239fc47d3e6/73d01/zipkin-trace.png 786w\", \"/static/6b72ac52b16999da1086e239fc47d3e6/a5918/zipkin-trace.png 1179w\", \"/static/6b72ac52b16999da1086e239fc47d3e6/03181/zipkin-trace.png 1572w\", \"/static/6b72ac52b16999da1086e239fc47d3e6/2fb56/zipkin-trace.png 2400w\"],\n    \"sizes\": \"(max-width: 786px) 100vw, 786px\",\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"h2\", {\n    \"id\": \"running-gatsby-with-tracing-turned-on\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#running-gatsby-with-tracing-turned-on\",\n    \"aria-label\": \"running gatsby with tracing turned on permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Running Gatsby with tracing turned on\"), mdx(\"p\", null, \"Gatsby code is instrumented with OpenTracing, which is a general tracing API that is implementation agnostic. Therefore, you\\u2019ll need to include and configure an OpenTracing compatible library in your application, as well as a backend to collect the trace data.\"), mdx(\"p\", null, \"The steps required to add tracing are below. Or, you can skip ahead if you want specific instructions for \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/performance-tracing/#local-jaeger-with-docker\"\n  }), \"jaeger\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/performance-tracing/#local-zipkin-with-docker\"\n  }), \"zipkin\"), \".\"), mdx(\"h3\", {\n    \"id\": \"1-library-dependency\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#1-library-dependency\",\n    \"aria-label\": \"1 library dependency permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"1. Library dependency\"), mdx(\"p\", null, \"Add an \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/opentracing\"\n  }), \"OpenTracing compatible library\"), \" to your site\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" dependencies.\"), mdx(\"h3\", {\n    \"id\": \"2-library-configuration-file\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#2-library-configuration-file\",\n    \"aria-label\": \"2 library configuration file permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"2. Library configuration file\"), mdx(\"p\", null, \"Each OpenTracing library must be configured. For example, what is the URL of the tracing backend? How often should spans be sent to the backend? What service name should the trace be recorded under? Etc.\"), mdx(\"p\", null, \"The configuration file is a JavaScript file that exports two functions: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"create\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"stop\"), \".\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"create\"), \": Create and return an \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/opentracing/opentracing-javascript/blob/master/src/tracer.ts\"\n  }), \"OpenTracing compatible Tracer\"), \". It is called at the start of the build.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"stop\"), \": Called at the end of the build. Any cleanup required by the tracer should be performed here, such as clearing out any span queues and sending them to the tracing backend.\")), mdx(\"h3\", {\n    \"id\": \"3-start-gatsby-with-tracing-turned-on\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#3-start-gatsby-with-tracing-turned-on\",\n    \"aria-label\": \"3 start gatsby with tracing turned on permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"3. Start Gatsby with tracing turned on\"), mdx(\"p\", null, \"The above configuration file can be passed to Gatsby with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--open-tracing-config-file\"), \" command-line option. When Gatsby is started with this option, it will load the supplied tracing configuration file, and call its \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"create\"), \" function. The returned Tracer will be used for tracing the build. Once the build has stopped, the configuration file\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"stop\"), \" method will be called, allowing the tracing implementation to perform any cleanup.\"), mdx(\"h2\", {\n    \"id\": \"tracing-backend-examples\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#tracing-backend-examples\",\n    \"aria-label\": \"tracing backend examples permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Tracing backend examples\"), mdx(\"p\", null, \"There are many OpenTracing compatible backends available. Below is an example of how to hook Zipkin into Gatsby.\"), mdx(\"h3\", {\n    \"id\": \"local-jaeger-with-docker\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#local-jaeger-with-docker\",\n    \"aria-label\": \"local jaeger with docker permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"local Jaeger with Docker\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.jaegertracing.io/\"\n  }), \"Jaeger\"), \" is an open source tracing system that can be run locally using Docker.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Add \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/jaeger-client\"\n  }), \"jaeger-client\"), \" to your site:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"yarn add jaeger-client\\n\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"or\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"npm install jaeger-client\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Run Jaeger\\u2019s all-in-one Docker instance with:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"docker run -d --name jaeger \\\\\\n    -e COLLECTOR_ZIPKIN_HTTP_PORT=9411 \\\\\\n    -p 5775:5775/udp \\\\\\n    -p 6831:6831/udp \\\\\\n    -p 6832:6832/udp \\\\\\n    -p 5778:5778 \\\\\\n    -p 16686:16686 \\\\\\n    -p 14268:14268 \\\\\\n    -p 9411:9411 \\\\\\n    jaegertracing/all-in-one:1.8\\n\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"See \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.jaegertracing.io/docs/1.8/getting-started/\"\n  }), \"Jaeger Getting Started\"), \" for more information.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Start Gatsby \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"develop\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--open-tracing-config-file\"), \" pointing at the Jaeger configuration file. An example file is provided in the Gatsby project under \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gatsbyjs/gatsby/blob/master/packages/gatsby/src/utils/tracer/jaeger-local.js\"\n  }), \"node_modules/gatsby/dist/utils/tracer/jaeger-local.js\"), \" that will send tracing spans to your local Docker instance over HTTP. E.g\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"gatsby build --open-tracing-config-file node_modules/gatsby/dist/utils/tracer/jaeger-local.js\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Once the build is complete, view your tracing information at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:16686\"\n  }), \"http://localhost:16686\"), \". On the left menu, select the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build\"), \" operation to see your build\\u2019s root trace.\"))), mdx(\"h3\", {\n    \"id\": \"local-zipkin-with-docker\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#local-zipkin-with-docker\",\n    \"aria-label\": \"local zipkin with docker permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"local Zipkin with Docker\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://zipkin.io/\"\n  }), \"Zipkin\"), \" is an open source tracing system that can be run locally using Docker.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Add following dependencies to your site\\u2019s \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\")), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/zipkin\"\n  }), \"zipkin\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/zipkin-javascript-opentracing\"\n  }), \"zipkin-javascript-opentracing\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/zipkin-transport-http\"\n  }), \"zipkin-transport-http\")))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Run Zipkin\\u2019s all-in-one Docker instance with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"docker run -d -p 9411:9411 openzipkin/zipkin\"), \". See \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://zipkin.io/pages/quickstart.html\"\n  }), \"Zipkin Getting Started\"), \" for more information.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Start Gatsby \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"develop\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--open-tracing-config-file\"), \" pointing at the Zipkin configuration file. An example file is provided in the Gatsby project under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node_modules/gatsby/dist/utils/tracer/zipkin-local.js\"), \" that will send tracing spans to your local Docker instance. E.g\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"gatsby build --open-tracing-config-file node_modules/gatsby/dist/utils/tracer/zipkin-local.js\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Once the build is complete, view your tracing information at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:9411\"\n  }), \"http://localhost:9411\")))), mdx(\"h2\", {\n    \"id\": \"adding-your-own-tracing\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#adding-your-own-tracing\",\n    \"aria-label\": \"adding your own tracing permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Adding your own tracing\"), mdx(\"p\", null, \"The default tracing that comes with Gatsby can give you a good idea of which plugins or stages of the build are slowing down your site. But sometimes, you\\u2019ll want to trace the internals of your site. Or if you\\u2019re a plugin author, you might want to trace long operations.\"), mdx(\"p\", null, \"To provide custom tracing, you can use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tracing\"), \" object, which is present in the args passed to API implementers. This tracing object contains a function called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"startSpan\"), \". This simply wraps \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/opentracing/opentracing-javascript/blob/master/src/tracer.ts#L79\"\n  }), \"OpenTracing startSpan\"), \", but provides the default \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"childOf: parentSpan\"), \" span args. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"startSpan\"), \" returns a span object that you must explicitly end by calling its \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".finish()\"), \" method. For example:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript:title=gatsby-node.js\"\n  }), \"exports.sourceNodes = async ({ actions, tracing }) => {\\n  const span = tracing.startSpan(`foo`)\\n\\n  // Perform any span operations. E.g add a tag to your span\\n  span.setTag(`bar`, `baz`)\\n\\n  // Rest of your plugin code\\n\\n  span.finish()\\n}\\n\")), mdx(\"p\", null, \"With this span, you can perform any OpenTracing span operation such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/opentracing/opentracing-javascript/blob/master/src/span.ts#L89\"\n  }), \"span.setTag\"), \". Just make sure that the tracing backend supports these operations. You can provide an optional second span options argument to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"startSpan\"), \" which will be passed to the underlying OpenTracing call.\"), mdx(\"p\", null, \"For advanced use cases, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tracing\"), \" object also provides \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tracer\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"parentSpan\"), \" fields. You can use these to construct independent spans, or your own child spans (see the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/opentracing/opentracing-javascript/tree/master/src\"\n  }), \"OpenTracing project\"), \" for more info).\"));\n}\n;\nMDXContent.isMDXComponent = true;",
        "excerpt": "Gatsby allows a build to be traced, enabling you to find which plugins or parts of the build are taking the longest. The trace information…",
        "timeToRead": 3,
        "tableOfContents": {
          "items": [
            {
              "url": "#running-gatsby-with-tracing-turned-on",
              "title": "Running Gatsby with tracing turned on",
              "items": [
                {
                  "url": "#1-library-dependency",
                  "title": "1. Library dependency"
                },
                {
                  "url": "#2-library-configuration-file",
                  "title": "2. Library configuration file"
                },
                {
                  "url": "#3-start-gatsby-with-tracing-turned-on",
                  "title": "3. Start Gatsby with tracing turned on"
                }
              ]
            },
            {
              "url": "#tracing-backend-examples",
              "title": "Tracing backend examples",
              "items": [
                {
                  "url": "#local-jaeger-with-docker",
                  "title": "local Jaeger with Docker"
                },
                {
                  "url": "#local-zipkin-with-docker",
                  "title": "local Zipkin with Docker"
                }
              ]
            },
            {
              "url": "#adding-your-own-tracing",
              "title": "Adding your own tracing"
            }
          ]
        },
        "fields": {
          "slug": "/docs/performance-tracing/",
          "anchor": "performance-tracing"
        },
        "frontmatter": {
          "title": "Performance tracing",
          "overview": null,
          "issue": null,
          "disableTableOfContents": null,
          "tableOfContentsDepth": null
        },
        "parent": {
          "__typename": "File",
          "relativePath": "docs/performance-tracing.md"
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/docs/performance-tracing/",
      "prev": {
        "title": "Debugging Cache Issues",
        "link": "/docs/debugging-cache-issues/",
        "breadcrumbTitle": "Cache Issues"
      },
      "next": {
        "title": "Debugging Async Lifecycles",
        "link": "/docs/debugging-async-lifecycles/",
        "breadcrumbTitle": "Async Lifecycles"
      }
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsMarkdownJs2546709735(\n  $path: String!\n) {\n  mdx(fields: {slug: {eq: $path}}) {\n    body\n    excerpt\n    timeToRead\n    tableOfContents\n    fields {\n      slug\n      anchor\n    }\n    frontmatter {\n      title\n      overview\n      issue\n      disableTableOfContents\n      tableOfContentsDepth\n    }\n    ...MarkdownPageFooterMdx\n  }\n}\n\nfragment MarkdownPageFooterMdx on Mdx {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}