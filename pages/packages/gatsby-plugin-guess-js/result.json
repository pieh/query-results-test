{
  "path": "/packages/gatsby-plugin-guess-js/",
  "result": {
    "data": {
      "markdownRemark": {
        "html": "<h1 id=\"gatsby-plugin-guess-js\"><a href=\"#gatsby-plugin-guess-js\" aria-label=\"gatsby plugin guess js permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-plugin-guess-js</h1>\n<p>Gatsby plugin for integrating <a href=\"https://github.com/guess-js/guess\">Guess.js</a> with Gatsby.</p>\n<p>Guess.js is a library for enabling data-driven user-experiences on the web.</p>\n<p>When this plugin is added to your site, it will automatically download Google Analytics\ndata and use this to create a model to predict which page a user is most likely to visit\nfrom a given page.</p>\n<p>The plugin uses this information to do two things.</p>\n<ul>\n<li>When generating HTML pages, it automatically adds <code class=\"language-text\">&lt;link prefetch&gt;</code> for resources on pages\nthe user is likely to visit. This means that as soon as a person visits your site, their browser\nwill immediately start downloading in the background code and data for links they’ll likely click on which\ncan dramatically improve the site performance.</li>\n<li>Once the person has loaded your site and visits additional pages, the plugin will continue to predict\nwhich pages will be visited and prefetch their resources as well.</li>\n</ul>\n<h2 id=\"demo\"><a href=\"#demo\" aria-label=\"demo permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Demo</h2>\n<p><a href=\"https://guess-gatsby-wikipedia-demo.firebaseapp.com\">https://guess-gatsby-wikipedia-demo.firebaseapp.com</a></p>\n<h2 id=\"install\"><a href=\"#install\" aria-label=\"install permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install</h2>\n<p><code class=\"language-text\">npm install --save gatsby-plugin-guess-js</code></p>\n<h2 id=\"how-to-use\"><a href=\"#how-to-use\" aria-label=\"how to use permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to use</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-plugin-guess-js\"</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Find the view id in the GA admin in a section labeled \"views\"</span>\n        GAViewID<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">VIEW_ID</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Add a JWT to get data from GA</span>\n        jwt<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          client_email<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">GOOGLE_SERVICE_ACCOUNT_EMAIL</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n          private_key<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        minimumThreshold<span class=\"token punctuation\">:</span> <span class=\"token number\">0.03</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// The \"period\" for fetching analytic data.</span>\n        period<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          startDate<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-1-1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          endDate<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"integrating-with-ci\"><a href=\"#integrating-with-ci\" aria-label=\"integrating with ci permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integrating with CI</h2>\n<p>Integrating this plugin within a CI pipeline may cause errors because the plugin will prompt the user/machine to log into the Google Analytics account. To get around this you’ll need to generate a JWT for your GA account to pass to the plugin, this will enable the plugin to work in prod without any human interaction to authenticate permissions</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// In your gatsby-config.js</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">\"gatsby-plugin-guess-js\"</span><span class=\"token punctuation\">,</span>\n      options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Find the view id in the GA admin in a section labeled \"views\"</span>\n        GAViewID<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">VIEW_ID</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        minimumThreshold<span class=\"token punctuation\">:</span> <span class=\"token number\">0.03</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Set Google Analytics jwt with Google Service Account email and private key</span>\n        jwt<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          client_email<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">GOOGLE_SERVICE_ACCOUNT_EMAIL</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n          private_key<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// The \"period\" for fetching analytic data.</span>\n        period<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          startDate<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2018-1-1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          endDate<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"how-to-get-a-jwt-token\"><a href=\"#how-to-get-a-jwt-token\" aria-label=\"how to get a jwt token permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to get a JWT token?</h3>\n<blockquote>\n<p>Excerpt from <a href=\"https://2ality.com/2015/10/google-analytics-api.html\">https://2ality.com/2015/10/google-analytics-api.html</a></p>\n</blockquote>\n<p>Go to the Google Developers Console:</p>\n<ul>\n<li>Create a new project (e.g. myproject).</li>\n<li>\n<p>In section “APIs &#x26; auth → Credentials”, execute “Add credentials → Service account”.</p>\n<ul>\n<li>Download the resulting JSON file (e.g. “myproject-3126e4caac6a.json”).</li>\n<li>Put that file into a directory node<em>modules that is inside one of the parent directories of the script that we’ll create later. That means that you can keep it out of the repository with analytics.js. For example, the following path is perfectly fine:\n`$HOME/node</em>modules/myproject-3126e4caac6a.json`</li>\n<li>The credentials that you created have an email address (which is displayed in the user interface and stored inside the JSON file). Copy that email address.</li>\n</ul>\n</li>\n</ul>\n<p>Go to the Admin panel in Google Analytics:</p>\n<ul>\n<li>\n<p>Analytics has three scopes:</p>\n<ul>\n<li>Account</li>\n<li>Property</li>\n<li>View</li>\n</ul>\n</li>\n<li>\n<p>Create a new user in scope “Property”, via “User Management”.</p>\n<ul>\n<li>That user has the email address that you copied previously.</li>\n<li>Its permissions are “Read &#x26; Analyze”.</li>\n</ul>\n</li>\n<li>In scope “View”, go to “View Settings” and write down the “View ID” (e.g. 97675673) for later.</li>\n</ul>\n<blockquote>\n<p>This JWT will only be valid for a finite amount of time. If you would like to generate a token that will not expire, please follow further instructions in <a href=\"https://2ality.com/2015/10/google-analytics-api.html\">https://2ality.com/2015/10/google-analytics-api.html</a></p>\n</blockquote>",
        "excerpt": "gatsby-plugin-guess-js Gatsby plugin for integrating Guess.js with Gatsby. Guess.js is a library for enabling data-driven user-experiences…",
        "timeToRead": 3,
        "fields": {
          "title": "gatsby-plugin-guess-js"
        },
        "parent": {
          "__typename": "File",
          "relativePath": "gatsby-plugin-guess-js/README.md"
        }
      },
      "npmPackage": {
        "name": "gatsby-plugin-guess-js",
        "keywords": [
          "gatsby",
          "gatsby-plugin",
          "guess.js",
          "google analytics",
          "machine learning",
          "prefetch"
        ],
        "lastPublisher": {
          "name": "sidharthachatterjee",
          "avatar": "https://gravatar.com/avatar/cb6abe87d0f9d4720bb60e336fc220d3"
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/packages/gatsby-plugin-guess-js/",
      "id": "7dcd16e9-72e7-51e5-8491-bd28b070ba05",
      "layout": "plugins"
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsLocalPackagesJs2742909928(\n  $slug: String!\n) {\n  markdownRemark(fields: {slug: {eq: $slug}}) {\n    html\n    excerpt\n    timeToRead\n    fields {\n      title\n    }\n    ...MarkdownPageFooter\n  }\n  npmPackage(slug: {eq: $slug}) {\n    name\n    keywords\n    lastPublisher {\n      name\n      avatar\n    }\n  }\n}\n\nfragment MarkdownPageFooter on MarkdownRemark {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}