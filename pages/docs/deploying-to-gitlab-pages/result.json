{
  "path": "/docs/deploying-to-gitlab-pages/",
  "result": {
    "data": {
      "mdx": {
        "body": "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Deploying to GitLab Pages\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"GitLab Pages are very similar to GitHub Pages. GitLab Pages also supports custom domain names and SSL certificates and includes a continuous integration platform.\"), mdx(\"p\", null, \"Create a new GitLab repository, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/\"\n  }), \"create a new Gatsby site\"), \" if you haven\\u2019t already, and add the GitLab remote.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"git init\\ngit remote add origin git@gitlab.com:examplerepository\\ngit add .\\ngit push -u origin master\\n\")), mdx(\"p\", null, \"You can deploy sites on GitLab Pages with or without a custom domain. If you choose to use the default setup (without a custom domain), or if you create a project site, you will need to setup your site with path prefixing. If adding a custom domain, you can skip the Path Prefix step, and remove \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--prefix-paths\"), \" from the gitlab-ci.yml file.\"), mdx(\"h2\", {\n    \"id\": \"add-path-prefix-to-gatsby\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#add-path-prefix-to-gatsby\",\n    \"aria-label\": \"add path prefix to gatsby permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Add Path Prefix to Gatsby\"), mdx(\"p\", null, \"As the site will be hosted under yourname.gitlab.io/examplerepository/, you will need to configure Gatsby to use the Path Prefix plugin.\"), mdx(\"p\", null, \"In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config.js\"), \", set the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pathPrefix\"), \" to be added to your site\\u2019s link paths. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pathPrefix\"), \" should be the project name in your repository. (ex. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://gitlab.com/yourname/examplerepository/\"), \" - your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pathPrefix\"), \" should be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/examplerepository\"), \"). See \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/path-prefix/\"\n  }), \"the docs page on path prefixing for more\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=gatsby-config.js\"\n  }), \"module.exports = {\\n  pathPrefix: `/examplerepository`,\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"build-and-deploy-with-gitlab-ci\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#build-and-deploy-with-gitlab-ci\",\n    \"aria-label\": \"build and deploy with gitlab ci permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Build and Deploy with GitLab CI\"), mdx(\"p\", null, \"To use GitLab\\u2019s continuous integration (CI), you need to add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".gitlab-ci.yml\"), \" configuration file. This is the file that GitLab uses to manage the CI job.\"), mdx(\"p\", null, \"The online editor on the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gitlab.com\"\n  }), \"GitLab\"), \" website contains a pre-built template for Gatsby deployment.\"), mdx(\"p\", null, \"To use the template open your repository on their website, select the \\u2018Setup CI/CD\\u2019 option on the center menu, and it will create a new blank \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".gitlab-ci.yml\"), \" for you. Now select the \\u2018Apply a GitLab CI Yaml Template\\u2019 drop-down, and type \\u2018Gatsby\\u2019 into the filter. Select the Gatsby option, click \\u2018Commit Changes\\u2019, and you are done!\"), mdx(\"p\", null, \"If adding this manually to your project, the file needs to contain a few required fields:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml:title=.gitlab-ci.yml\"\n  }), \"image: node:latest\\n\\n# This folder is cached between builds\\n# http://docs.gitlab.com/ce/ci/yaml/README.html#cache\\ncache:\\n  paths:\\n    - node_modules/\\n\\npages:\\n  script:\\n    - npm install\\n    - ./node_modules/.bin/gatsby build --prefix-paths\\n  artifacts:\\n    paths:\\n      - public\\n  only:\\n    - master\\n\")), mdx(\"p\", null, \"The CI platform uses Docker images/containers, so \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"image: node:latest\"), \" tells the CI to use the latest node image. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cache:\"), \" caches the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node_modules\"), \" folder in between builds, so subsequent builds should be a lot faster as it doesn\\u2019t have to reinstall all the dependencies required. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pages:\"), \" is the name of the CI stage. You can have multiple stages, e.g. \\u2018Test\\u2019, \\u2018Build\\u2019, \\u2018Deploy\\u2019 etc. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"script:\"), \" starts the next part of the CI stage, telling it to start running the below scripts inside the image selected. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm install\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./node_modules/.bin/gatsby build --prefix-paths\"), \" will install all dependencies, and start the static site build, respectively.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./node_modules/.bin/gatsby build --prefix-paths\"), \" was used so you don\\u2019t have to install gatsby-cli to build the image, as it has already been included and installed with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm install\"), \". \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--prefix-paths\"), \" was used because \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"without\"), \" that flag, Gatsby ignores your pathPrefix. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"artifacts:\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"paths:\"), \" are used to tell GitLab Pages\\nwhere the static files are kept. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"only:\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"master\"), \" tells the CI to only run the above instructions when the master branch is deployed.\"), mdx(\"p\", null, \"Add that configuration, and with the next master branch push, your site should have been built correctly. This can be checked by going to your repository on GitLab, and selecting CI/CD in the sidebar. This will then show you a log of all jobs that have either succeeded or failed. You can click on the failed status, and then select the job to get more information about why your build may have failed.\"), mdx(\"p\", null, \"If all went well, you should now be able to access your site. It will be hosted under gitlab.io - for example if you have a repository under your namespace, the url will be yourname.gitlab.io/examplerepository.\"), mdx(\"p\", null, \"Visit the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gitlab.com/help/user/project/pages/getting_started_part_one.md\"\n  }), \"GitLab Pages\"), \" to learn how to setup custom domains and find out about advanced configurations.\"));\n}\n;\nMDXContent.isMDXComponent = true;",
        "excerpt": "GitLab Pages are very similar to GitHub Pages. GitLab Pages also supports custom domain names and SSL certificates and includes a continuous…",
        "timeToRead": 2,
        "tableOfContents": {
          "items": [
            {
              "url": "#add-path-prefix-to-gatsby",
              "title": "Add Path Prefix to Gatsby"
            },
            {
              "url": "#build-and-deploy-with-gitlab-ci",
              "title": "Build and Deploy with GitLab CI"
            }
          ]
        },
        "fields": {
          "slug": "/docs/deploying-to-gitlab-pages/",
          "anchor": "deploying-to-gitlab-pages"
        },
        "frontmatter": {
          "title": "Deploying to GitLab Pages",
          "overview": null,
          "issue": null,
          "disableTableOfContents": null,
          "tableOfContentsDepth": null
        },
        "parent": {
          "__typename": "File",
          "relativePath": "docs/deploying-to-gitlab-pages.md"
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/docs/deploying-to-gitlab-pages/",
      "prev": {
        "title": "Deploying to ZEIT Now",
        "link": "/docs/deploying-to-zeit-now/",
        "breadcrumbTitle": "ZEIT Now"
      },
      "next": {
        "title": "Deploying to Netlify",
        "link": "/docs/deploying-to-netlify/",
        "breadcrumbTitle": "Netlify"
      }
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsMarkdownJs2546709735(\n  $path: String!\n) {\n  mdx(fields: {slug: {eq: $path}}) {\n    body\n    excerpt\n    timeToRead\n    tableOfContents\n    fields {\n      slug\n      anchor\n    }\n    frontmatter {\n      title\n      overview\n      issue\n      disableTableOfContents\n      tableOfContentsDepth\n    }\n    ...MarkdownPageFooterMdx\n  }\n}\n\nfragment MarkdownPageFooterMdx on Mdx {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}