{
  "path": "/docs/adding-search-with-algolia/",
  "result": {
    "data": {
      "mdx": {
        "body": "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Adding search with Algolia\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Once you\\u2019ve added some content to your site, you\\u2019ll want to make it easy for your visitors to find what they\\u2019re looking for. This guide will run you through the process of setting up a custom search experience powered by \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.algolia.com\"\n  }), \"Algolia\"), \" on any Gatsby site. You\\u2019ll be writing functional components that rely on React Hooks so following this guide requires you to be using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://reactjs.org/blog/2019/02/06/react-v16.8.0\"\n  }), \"React 16.8\"), \" or higher.\"), mdx(\"p\", null, \"Two things before you begin:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Beyond this guide, you may also want to checkout Algolia\\u2019s extensive \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.algolia.com/doc/guides/building-search-ui/getting-started/react\"\n  }), \"docs on how to get started in React\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"If you\\u2019re looking to add search to a documentation site, you can let Algolia handle most of the steps outlined below by using their \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://community.algolia.com/docsearch\"\n  }), \"Docsearch\"), \" functionality. For other types of sites and more fine-grained control over exactly what data should be indexed, read on.\")), mdx(\"h2\", {\n    \"id\": \"why-use-algolia\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#why-use-algolia\",\n    \"aria-label\": \"why use algolia permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Why Use Algolia?\"), mdx(\"p\", null, \"Algolia is a site search hosting platform that hosts page index information for you, and then returns the results to wherever you have the site search located on your site. You tell Algolia what pages you have, where they are, and how to navigate to them, and Algolia returns those results to the user based on whatever search terms they use.\"), mdx(\"p\", null, \"To implement Algolia search on your Gatsby site, you\\u2019ll need to install the plugin, tell it what information to query, provide your Algolia credentials, and a few other configuration steps. This means that after the queries have run when you \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby build\"), \", Algolia will have the entire index of your site available and can serve results to users very quickly. To learn more about the benefits of using Algolia, \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.netlify.com/blog/2017/10/10/replacing-our-search-with-algolia/\"\n  }), \"check out this blog post from Netlify, who recently switched their site search to Algolia\"), \".\"), mdx(\"h2\", {\n    \"id\": \"configuring-the-algolia-plugin\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#configuring-the-algolia-plugin\",\n    \"aria-label\": \"configuring the algolia plugin permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Configuring the Algolia plugin\"), mdx(\"p\", null, \"First, you\\u2019ll need to add \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/algolia/gatsby-plugin-algolia\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"gatsby-plugin-algolia\")), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/algolia/react-instantsearch\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"react-instantsearch-dom\")), \" to your project. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"react-instantsearch\"), \" is Algolia\\u2019s library containing off-the-shelf React components which you can import to save yourself a lot of work. You\\u2019ll also be using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dotenv\"), \" which gets shipped with Gatsby by default. You\\u2019re going to need it to specify your Algolia app ID and both the search and admin API keys without committing them to version control.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"npm install --save gatsby-plugin-algolia react-instantsearch-dom algoliasearch dotenv\\n\")), mdx(\"p\", null, \"You will be using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"styled-components\"), \" to design the search UI in this guide but you can use whichever CSS solution you prefer. If you\\u2019d like to start using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"styled-components\"), \" as well, you also need to install\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-shell\"\n  }), \"npm install --save styled-components gatsby-plugin-styled-components\\n\")), mdx(\"p\", null, \"Next, add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-plugin-algolia\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-plugin-styled-components\"), \" to your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-config.js\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=gatsby-config.js\"\n  }), \"const queries = require(\\\"./src/utils/algolia\\\")\\n\\nrequire(\\\"dotenv\\\").config()\\n\\nmodule.exports = {\\n  siteMetadata: {\\n    title: `Gatsby+Algolia`,\\n    description: `How to setup Algolia search in Gatsby`,\\n    author: `<your name>`,\\n  },\\n  plugins: [\\n    {\\n      resolve: `gatsby-plugin-algolia`,\\n      options: {\\n        appId: process.env.GATSBY_ALGOLIA_APP_ID,\\n        apiKey: process.env.ALGOLIA_ADMIN_KEY,\\n        queries,\\n        chunkSize: 10000, // default: 1000\\n      },\\n    },\\n    `gatsby-plugin-styled-components`,\\n  ],\\n}\\n\")), mdx(\"p\", null, \"Notice that you\\u2019re loading \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"queries\"), \" from a file at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./src/utils/algolia.js\"), \" (you can of course put it wherever you like) and your Algolia ID and API key from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" so let\\u2019s add those files.\"), mdx(\"p\", null, \"For this, you will need to navigate to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.algolia.com/api-keys\"\n  }), \"the \\u2018API Keys\\u2019 section of your Algolia profile\"), \". If you already have an account, you will find your API keys here. If not, you will need to sign up for one and then navigate to this link. It should look something like this screenshot, only with actual numbers instead of redacted ones:\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"786px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/7d7464953fdefee4e5dff0ce845f0834/ae232/algolia-api-keys.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"59.82532751091703%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABuUlEQVQoz5WSS2vcMBSF/f//Q0Mg6SIE2lULpVDotnTVUpq6Q8aehx+yJT8k2ZZszemVvAgT0oQIPo4km+t7znV0v00RxxvUvIHSI7peERr9C6zvPdBLHYgqPiArRnDRo+KCLumh0i8iPXotItUQ1BeOuBhQVnToNBreoxXqgUahEfJJeNWjLju0nURVUyNUTJPDSNNXGGMQZLnYCeQJXzXlyGjPDh14LlFnPXi2qigVkt8M8fccm02CDx+/IE2PsPOMaDIG02RgrQVwwvl6fH5+WTv7Dgd4lEcO6Bp9hrfulR1bcNYjy0tst3sk1FGSHJDuVuWixTBOiBSFW9dkraooE2+7CVbzdLXNDi1ayvju2xH7uManz19xcXmLq7fvcXX9Dtekby5u8OPnHZZlIctkt2k7mpIkg6+z+HiFgiO1yWkgkn4XM8wYlcVEeB0loW3ocP+nDhnN8/8xxiLyhcqSoSwq7DYFkjhD8jdHShzuGXghUe5abH8xDHrCOsTpDGMm+MZChiNddF0fOpwXC2NNYHHLqy0759YMRdPCD+d0ohTdKagjdYujXFzIZpmXde+egO59MR/JP5PslwCIeuHqAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"algolia api key screenshot\",\n    \"title\": \"algolia api key screenshot\",\n    \"src\": \"/static/7d7464953fdefee4e5dff0ce845f0834/73d01/algolia-api-keys.png\",\n    \"srcSet\": [\"/static/7d7464953fdefee4e5dff0ce845f0834/a3b1f/algolia-api-keys.png 197w\", \"/static/7d7464953fdefee4e5dff0ce845f0834/07137/algolia-api-keys.png 393w\", \"/static/7d7464953fdefee4e5dff0ce845f0834/73d01/algolia-api-keys.png 786w\", \"/static/7d7464953fdefee4e5dff0ce845f0834/a5918/algolia-api-keys.png 1179w\", \"/static/7d7464953fdefee4e5dff0ce845f0834/03181/algolia-api-keys.png 1572w\", \"/static/7d7464953fdefee4e5dff0ce845f0834/ae232/algolia-api-keys.png 2061w\"],\n    \"sizes\": \"(max-width: 786px) 100vw, 786px\",\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Once you have your App ID, Search-Only API Key, and Admin API Key, place the following code into your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" file, replacing the placeholder keys with your keys:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text:title=.env\"\n  }), \"GATSBY_ALGOLIA_APP_ID=KA4OJA9KAS\\nGATSBY_ALGOLIA_SEARCH_KEY=lkjas987ef923ohli9asj213k12n59ad\\nALGOLIA_ADMIN_KEY=lksa09sadkj1230asd09dfvj12309ajl\\n\")), mdx(\"p\", null, \"The placeholder keys in the previous code snippet are random character sequences but the ones you copy from your Algolia profile should be the same length. One of the benefits of using this method of querying your API keys is that they all get stored in one file, on the server, and are therefore never exposed to the client-side, which increases security.\"), mdx(\"p\", null, \"Since your .env file contains your real private API keys, it is considered a security risk to commit your actual \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" file. It\\u2019s good practice to commit a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env.example\"), \" to git or other version control so that if someone forks your repo, they know which environment variables they need to supply, without committing your private keys.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text:title=.env.example\"\n  }), \"# rename this file to .env and supply the values listed below\\n# also make sure they are available to the build tool (e.g. Netlify)\\n# warning: variables prexifed with GATSBY_ will be made available to client-side code\\n# be careful not to expose sensitive data (in this case your Algolia admin key)\\n\\nGATSBY_ALGOLIA_APP_ID=insertValue\\nGATSBY_ALGOLIA_SEARCH_KEY=insertValue\\nALGOLIA_ADMIN_KEY=insertValue\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"queries\"), \" allow you to grab the data you want Algolia to index directly from Gatsby\\u2019s GraphQL layer by exporting from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/utils/algolia.js\"), \" an array of objects, each containing a required GraphQL query and an optional index name, transformer function and settings object.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/utils/algolia.js\"\n  }), \"const pageQuery = `{\\n  pages: allMarkdownRemark(\\n    filter: {\\n      fileAbsolutePath: { regex: \\\"/pages/\\\" },\\n      frontmatter: {purpose: {eq: \\\"page\\\"}}\\n    }\\n  ) {\\n    edges {\\n      node {\\n        objectID: id\\n        frontmatter {\\n          title\\n          slug\\n        }\\n        excerpt(pruneLength: 5000)\\n      }\\n    }\\n  }\\n}`\\n\\nconst postQuery = `{\\n  posts: allMarkdownRemark(\\n    filter: { fileAbsolutePath: { regex: \\\"/posts/\\\" } }\\n  ) {\\n    edges {\\n      node {\\n        objectID: id\\n        frontmatter {\\n          title\\n          slug\\n          date(formatString: \\\"MMM D, YYYY\\\")\\n          tags\\n        }\\n        excerpt(pruneLength: 5000)\\n      }\\n    }\\n  }\\n}`\\n\\nconst flatten = arr =>\\n  arr.map(({ node: { frontmatter, ...rest } }) => ({\\n    ...frontmatter,\\n    ...rest,\\n  }))\\nconst settings = { attributesToSnippet: [`excerpt:20`] }\\n\\nconst queries = [\\n  {\\n    query: pageQuery,\\n    transformer: ({ data }) => flatten(data.pages.edges),\\n    indexName: `Pages`,\\n    settings,\\n  },\\n  {\\n    query: postQuery,\\n    transformer: ({ data }) => flatten(data.posts.edges),\\n    indexName: `Posts`,\\n    settings,\\n  },\\n]\\n\\nmodule.exports = queries\\n\")), mdx(\"p\", null, \"It might look a little intimidating at first, but basically you\\u2019re just letting \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-plugin-algolia\"), \" know how to acquire the data with which to populate your indices on their servers. The example above uses separate queries passing data to separate indices for pages and blog posts.\"), mdx(\"p\", null, \"Transformers allow you to modify the data returned by the queries to bring it into a format ready for searching. All you\\u2019re doing here is \\u2018flattening\\u2019 posts and pages to \\u2018unnest\\u2019 the frontmatter fields (such as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"author\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"date\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tags\"), \") but transformers could do much more for you if required. This makes the whole process of indexing your data really flexible and powerful. You could for instance use them to filter the results of your queries, format fields, add or merge them, etc.\"), mdx(\"p\", null, \"If you\\u2019ve come this far, then the \\u201Cbackend\\u201D is done. You should now be able to run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby build\"), \" and see your indices in Algolia\\u2019s webinterface be flooded with your data.\"), mdx(\"h2\", {\n    \"id\": \"adding-a-search-interface-to-your-site\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#adding-a-search-interface-to-your-site\",\n    \"aria-label\": \"adding a search interface to your site permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Adding a search interface to your site\"), mdx(\"p\", null, \"Next, let\\u2019s build a user-facing search interface for your site. It needs a way for the user to enter a search string, send that string to Algolia, receive matching results (\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"hits\"), \" in Algolia speak) from your indices and finally display those to the user. Let\\u2019s dive right in.\"), mdx(\"p\", null, \"You\\u2019re going to assemble everything you need into a React \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Search\"), \" component that you call from anywhere on your site where you want the user to be able to search. Even though design varies strongly from site to site, I\\u2019ll also go through the styles implemented with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://styled-components.com\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"styled-components\")), \" in this guide since working out the CSS transitions to have the search field slide out as the user clicks on it and the results pane to appear once Algolia returns matches took some time.\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Search\"), \" components is made up of the following files:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"index.js\")), \": the main component\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"input.js\")), \": the text input field\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"hitComps.js\")), \": the components that will render matching posts/pages\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"styles.js\")), \": the styled components\")), mdx(\"p\", null, \"There\\u2019s quite a lot happening in these files so let\\u2019s break them down one by one and piece by piece.\"), mdx(\"h3\", {\n    \"id\": \"indexjs\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#indexjs\",\n    \"aria-label\": \"indexjs permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"index.js\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/search/index.js\"\n  }), \"import React, { useState, useEffect, createRef } from \\\"react\\\"\\nimport {\\n  InstantSearch,\\n  Index,\\n  Hits,\\n  connectStateResults,\\n} from \\\"react-instantsearch-dom\\\"\\nimport algoliasearch from \\\"algoliasearch/lite\\\"\\n\\nimport { Root, HitsWrapper, PoweredBy } from \\\"./styles\\\"\\nimport Input from \\\"./Input\\\"\\nimport * as hitComps from \\\"./hitComps\\\"\\n\\nconst Results = connectStateResults(\\n  ({ searchState: state, searchResults: res, children }) =>\\n    res && res.nbHits > 0 ? children : `No results for '${state.query}'`\\n)\\n\\nconst Stats = connectStateResults(\\n  ({ searchResults: res }) =>\\n    res && res.nbHits > 0 && `${res.nbHits} result${res.nbHits > 1 ? `s` : ``}`\\n)\\n\\nconst useClickOutside = (ref, handler, events) => {\\n  if (!events) events = [`mousedown`, `touchstart`]\\n  const detectClickOutside = event =>\\n    !ref.current.contains(event.target) && handler()\\n  useEffect(() => {\\n    for (const event of events)\\n      document.addEventListener(event, detectClickOutside)\\n    return () => {\\n      for (const event of events)\\n        document.removeEventListener(event, detectClickOutside)\\n    }\\n  })\\n}\\n\\nexport default function Search({ indices, collapse, hitsAsGrid }) {\\n  const ref = createRef()\\n  const [query, setQuery] = useState(``)\\n  const [focus, setFocus] = useState(false)\\n  const searchClient = algoliasearch(\\n    process.env.GATSBY_ALGOLIA_APP_ID,\\n    process.env.GATSBY_ALGOLIA_SEARCH_KEY\\n  )\\n  useClickOutside(ref, () => setFocus(false))\\n  return (\\n    <InstantSearch\\n      searchClient={searchClient}\\n      indexName={indices[0].name}\\n      onSearchStateChange={({ query }) => setQuery(query)}\\n      root={{ Root, props: { ref } }}\\n    >\\n      <Input onFocus={() => setFocus(true)} {...{ collapse, focus }} />\\n      <HitsWrapper show={query.length > 0 && focus} asGrid={hitsAsGrid}>\\n        {indices.map(({ name, title, hitComp }) => (\\n          <Index key={name} indexName={name}>\\n            <header>\\n              <h3>{title}</h3>\\n              <Stats />\\n            </header>\\n            <Results>\\n              <Hits hitComponent={hitComps[hitComp](() => setFocus(false))} />\\n            </Results>\\n          </Index>\\n        ))}\\n        <PoweredBy />\\n      </HitsWrapper>\\n    </InstantSearch>\\n  )\\n}\\n\")), mdx(\"p\", null, \"At the top, you import \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"InstantSearch\"), \" from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://community.algolia.com/react-instantsearch\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"react-instantsearch-dom\")), \" which is the root component that allows your whole search experience to connect to Algolia\\u2019s service. As the name suggests, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Index\"), \" allows you to tap into an individual index and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hits\"), \" provides you with the data returned for a user\\u2019s search input. Finally \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://community.algolia.com/react-instantsearch/connectors/connectStateResults.html\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"connectStateResults\")), \" wraps around custom React components and provides them with high-level stats about the current search state such as the query, the number of results and how long it took to fetch them.\"), mdx(\"p\", null, \"You then import the styled components that make up the UI and the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Input\"), \" component into which the user enters the query.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/search/index.js\"\n  }), \"import { Root, SearchBox, HitsWrapper, PoweredBy } from \\\"./styles\\\"\\nimport Input from \\\"./Input\\\"\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PoweredBy\"), \" renders the string \\u201CPowered by Algolia\\u201D with a small logo and link. If you\\u2019re using Algolia\\u2019s generous free tier, they ask you to acknowledge them in this way below the search results. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"react-instantsearch-dom\"), \" also provides a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://community.algolia.com/react-instantsearch/widgets/PoweredBy.html\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"PoweredBy\"), \" component\"), \" specifically for this purpose but I preferred to build my own. You\\u2019ll get back to these styled components once you\\u2019re done with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \". For now, let\\u2019s move on.\"), mdx(\"p\", null, \"The last thing you need for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Search\"), \" component to work are hit components for every type of result you want to display to the user. The hit component determines how attributes of matching results (such as author, date, tags and title in the case of a blog post) are displayed to the user.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/search/index.js\"\n  }), \"import * as hitComps from \\\"./hitComps\\\"\\n\")), mdx(\"p\", null, \"Next you define two connected components. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Results\"), \" informs the user that no matches could be found for a query unless the number of hits is positive, i.e. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"searchResults.nbHits > 0\"), \". \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Stats\"), \" just displays \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"searchResults.nbHits\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/search/index.js\"\n  }), \"const Results = connectStateResults(\\n  ({ searchState: state, searchResults: res, children }) =>\\n    res && res.nbHits > 0 ? children : `No results for ${state.query}`\\n)\\n\\nconst Stats = connectStateResults(\\n  ({ searchResults: res }) =>\\n    res && res.nbHits > 0 && `${res.nbHits} result${res.nbHits > 1 ? `s` : ``}`\\n)\\n\")), mdx(\"p\", null, \"Now comes the actual \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Search\"), \" component. It starts off with some state initialization, defining handler functions and event listeners to trigger them. All they do is make the search input slide out when the user clicks a search icon and disappear again when the user clicks or touches (on mobile) anywhere.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/search/index.js\"\n  }), \"export default function Search({ indices, collapse, hitsAsGrid }) {\\n  const ref = createRef()\\n  const [query, setQuery] = useState(``)\\n  const [focus, setFocus] = useState(false)\\n  const searchClient = algoliasearch(\\n    process.env.GATSBY_ALGOLIA_APP_ID,\\n    process.env.GATSBY_ALGOLIA_SEARCH_KEY\\n  )\\n\\n  const handleClickOutside = event =>\\n    !ref.current.contains(event.target) && setFocus(false)\\n\\n  useEffect(() => {\\n    [`mousedown`, `touchstart`].forEach(event =>\\n      document.addEventListener(event, handleClickOutside)\\n    )\\n    return () =>\\n      [`mousedown`, `touchstart`].forEach(event =>\\n        document.removeEventListener(event, handleClickOutside)\\n      )\\n  })\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Search\"), \" returns JSX that renders a dynamic array of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"indices\"), \" passed as a prop. Each array item should be an object with keys \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"name\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"title\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hitComp\"), \" that specifies the name of the index in your Algolia account to be queried, the title to display above the results shown to the user and the component \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hitComp\"), \" that renders the data returned for each match.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/search/index.js\"\n  }), \"  return (\\n    <InstantSearch\\n      searchClient={searchClient}\\n      indexName={indices[0].name}\\n      onSearchStateChange={({ query }) => setQuery(query)}\\n      root={{ Root, props: { ref } }}\\n    >\\n      <Input onFocus={() => setFocus(true)} {...{ collapse, focus }} />\\n      <HitsWrapper show={query.length > 0 && focus} asGrid={hitsAsGrid}>\\n        {indices.map(({ name, title, hitComp }) => (\\n          <Index key={name} indexName={name}>\\n            <header>\\n              <h3>{title}</h3>\\n              <Stats />\\n            </header>\\n            <Results>\\n              <Hits hitComponent={hitComps[hitComp](() => setFocus(false))} />\\n            </Results>\\n          </Index>\\n        ))}\\n        <PoweredBy />\\n      </HitsWrapper>\\n    </InstantSearch>\\n  )\\n}\\n\")), mdx(\"p\", null, \"Passing this \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"indices\"), \" array as a prop allows you to reuse the same \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Search\"), \" component in different parts of your site and have each of them query different indices. As an example, besides a primary search box in the header used for finding pages and/or posts, your site might have a wiki and you want to offer your visitors a second search box that displays only wiki articles.\"), mdx(\"p\", null, \"Note that you fed \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"algoliasearch\"), \" with the same app ID you specified in our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".env\"), \" file and used in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/utils/algolia.js\"), \" as well as with your search-only API key to generate a search client which connects to your backend. \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Don\\u2019t paste in your Algolia admin API key here!\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"algoliasearch\"), \" only needs to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"read\"), \" your indices. Pasting your admin key here would allow others to obtain it once your site is deployed. They could then start messing with your indexed data on Algolia.\"), mdx(\"h2\", {\n    \"id\": \"inputjs\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#inputjs\",\n    \"aria-label\": \"inputjs permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"input.js\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/search/input.js\"\n  }), \"import React from \\\"react\\\"\\nimport { connectSearchBox } from \\\"react-instantsearch-dom\\\"\\n\\nimport { SearchIcon, Form, Input } from \\\"./styles\\\"\\n\\nexport default connectSearchBox(({ refine, ...rest }) => (\\n  <Form>\\n    <Input\\n      type=\\\"text\\\"\\n      placeholder=\\\"Search\\\"\\n      aria-label=\\\"Search\\\"\\n      onChange={e => refine(e.target.value)}\\n      {...rest}\\n    />\\n    <SearchIcon />\\n  </Form>\\n))\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Input\"), \" component is where the user enters the search string. It is quite short since the grunt work is done by Algolia\\u2019s \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://community.algolia.com/react-instantsearch/connectors/connectSearchBox.html\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"connectSearchBox\")), \" function.\"), mdx(\"p\", null, \"Now let\\u2019s look at the styled components \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SearchIcon\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Form\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Input\"), \" as well as the ones imported in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \".\"), mdx(\"h2\", {\n    \"id\": \"stylesjs\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#stylesjs\",\n    \"aria-label\": \"stylesjs permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"styles.js\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/search/styles.js\"\n  }), \"import React from \\\"react\\\"\\nimport styled, { css } from \\\"styled-components\\\"\\nimport { Search } from \\\"styled-icons/fa-solid/Search\\\"\\nimport { Algolia } from \\\"styled-icons/fa-brands/Algolia\\\"\\n\\nexport const Root = styled.div`\\n  position: relative;\\n  display: grid;\\n  grid-gap: 1em;\\n`\\n\\nexport const SearchIcon = styled(Search)`\\n  width: 1em;\\n  pointer-events: none;\\n`\\n\\nconst focus = css`\\n  background: white;\\n  color: ${props => props.theme.darkBlue};\\n  cursor: text;\\n  width: 5em;\\n  + ${SearchIcon} {\\n    color: ${props => props.theme.darkBlue};\\n    margin: 0.3em;\\n  }\\n`\\n\\nconst collapse = css`\\n  width: 0;\\n  cursor: pointer;\\n  color: ${props => props.theme.lightBlue};\\n  + ${SearchIcon} {\\n    color: white;\\n  }\\n  ${props => props.focus && focus}\\n  margin-left: ${props => (props.focus ? `-1.6em` : `-1em`)};\\n  padding-left: ${props => (props.focus ? `1.6em` : `1em`)};\\n  ::placeholder {\\n    color: ${props => props.theme.gray};\\n  }\\n`\\n\\nconst expand = css`\\n  background: ${props => props.theme.veryLightGray};\\n  width: 6em;\\n  margin-left: -1.6em;\\n  padding-left: 1.6em;\\n  + ${SearchIcon} {\\n    margin: 0.3em;\\n  }\\n`\\n\\nexport const Input = styled.input`\\n  outline: none;\\n  border: none;\\n  font-size: 1em;\\n  background: transparent;\\n  transition: ${props => props.theme.shortTrans};\\n  border-radius: ${props => props.theme.smallBorderRadius};\\n  {hightlight-next-line}\\n  ${props => (props.collapse ? collapse : expand)};\\n`\\n\\nexport const Form = styled.form`\\n  display: flex;\\n  flex-direction: row-reverse;\\n  align-items: center;\\n`\\n\\nexport const HitsWrapper = styled.div`\\n  display: ${props => (props.show ? `grid` : `none`)};\\n  max-height: 80vh;\\n  overflow: scroll;\\n  z-index: 2;\\n  -webkit-overflow-scrolling: touch;\\n  position: absolute;\\n  right: 0;\\n  top: calc(100% + 0.5em);\\n  width: 80vw;\\n  max-width: 30em;\\n  box-shadow: 0 0 5px 0;\\n  padding: 0.7em 1em 0.4em;\\n  background: white;\\n  border-radius: ${props => props.theme.smallBorderRadius};\\n  > * + * {\\n    padding-top: 1em !important;\\n    border-top: 2px solid ${props => props.theme.darkGray};\\n  }\\n  li + li {\\n    margin-top: 0.7em;\\n    padding-top: 0.7em;\\n    border-top: 1px solid ${props => props.theme.lightGray};\\n  }\\n  * {\\n    margin-top: 0;\\n    padding: 0;\\n  }\\n  ul {\\n    list-style: none;\\n  }\\n  mark {\\n    color: ${props => props.theme.lightBlue};\\n    background: ${props => props.theme.darkBlue};\\n  }\\n  header {\\n    display: flex;\\n    justify-content: space-between;\\n    margin-bottom: 0.3em;\\n    h3 {\\n      color: white;\\n      background: ${props => props.theme.gray};\\n      padding: 0.1em 0.4em;\\n      border-radius: ${props => props.theme.smallBorderRadius};\\n    }\\n  }\\n  h3 {\\n    margin: 0 0 0.5em;\\n  }\\n  h4 {\\n    margin-bottom: 0.3em;\\n  }\\n`\\n\\nexport const PoweredBy = () => (\\n  <span css=\\\"font-size: 0.6em; text-align: end; padding: 0;\\\">\\n    Powered by{` `}\\n    <a href=\\\"https://algolia.com\\\">\\n      <Algolia size=\\\"1em\\\" /> Algolia\\n    </a>\\n  </span>\\n)\\n\")), mdx(\"p\", null, \"Styles will of course be different from one site to the next so I only list these components here for completeness and because they implement the dynamic behavior of the search interface, i.e. that the input field only slides out once the user clicks the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SearchIcon\"), \" (a magnifier) and that the pane displaying search (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HitsWrapper\"), \") results only appears once Algolia\\u2019s server returned matches, both of you which you might want to keep.\"), mdx(\"p\", null, \"Now you\\u2019re almost done, two small steps remain. First you need to put together a hit component for every type of result you want to display. In this example, these are blog posts and pages. And second, you need to call your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Search\"), \" component somewhere on your site. Here are the hit components.\"), mdx(\"h2\", {\n    \"id\": \"hitcompsjs\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#hitcompsjs\",\n    \"aria-label\": \"hitcompsjs permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"hitComps.js\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/search/hitComps.js\"\n  }), \"import React, { Fragment } from \\\"react\\\"\\nimport { Highlight, Snippet } from \\\"react-instantsearch-dom\\\"\\nimport { Link } from \\\"gatsby\\\"\\nimport { Calendar } from \\\"styled-icons/octicons/Calendar\\\"\\nimport { Tags } from \\\"styled-icons/fa-solid/Tags\\\"\\n\\nexport const PageHit = clickHandler => ({ hit }) => (\\n  <div>\\n    <Link to={hit.slug} onClick={clickHandler}>\\n      <h4>\\n        <Highlight attribute=\\\"title\\\" hit={hit} tagName=\\\"mark\\\" />\\n      </h4>\\n    </Link>\\n    <Snippet attribute=\\\"excerpt\\\" hit={hit} tagName=\\\"mark\\\" />\\n  </div>\\n)\\n\\nexport const PostHit = clickHandler => ({ hit }) => (\\n  <div>\\n    <Link to={`/blog` + hit.slug} onClick={clickHandler}>\\n      <h4>\\n        <Highlight attribute=\\\"title\\\" hit={hit} tagName=\\\"mark\\\" />\\n      </h4>\\n    </Link>\\n    <div>\\n      <Calendar size=\\\"1em\\\" />\\n      &nbsp;\\n      <Highlight attribute=\\\"date\\\" hit={hit} tagName=\\\"mark\\\" />\\n      &emsp;\\n      <Tags size=\\\"1em\\\" />\\n      &nbsp;\\n      {hit.tags.map((tag, index) => (\\n        <Fragment key={tag}>\\n          {index > 0 && `, `}\\n          {tag}\\n        </Fragment>\\n      ))}\\n    </div>\\n    <Snippet attribute=\\\"excerpt\\\" hit={hit} tagName=\\\"mark\\\" />\\n  </div>\\n)\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Highlight\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Snippet\"), \" imported from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"react-instantsearch-dom\"), \" both display attributes of matching search results to the user. Their distinction is that the former renders it in full (e.g. a title, date or list of tags) whereas the latter only shows a snippet, i.e. a text passage of given length surrounding the matching string (e.g. for body texts). In each case the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"attribute\"), \" prop should be the name of the property as it was assigned in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/utils/algolia.js\"), \" and as it appears in your Aloglia indices.\"), mdx(\"h2\", {\n    \"id\": \"usage\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#usage\",\n    \"aria-label\": \"usage permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Usage\"), mdx(\"p\", null, \"Now all you need to do is import \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Search\"), \" somewhere. The obvious place is the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Header\"), \" component so let\\u2019s add it there.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js:title=src/components/Header/index.js\"\n  }), \"import React from \\\"react\\\"\\n\\nimport { Container, Logo } from \\\"./styles\\\"\\nimport Nav from \\\"../Nav\\\"\\nimport Search from \\\"../Search\\\"\\n\\nconst searchIndices = [\\n  { name: `Pages`, title: `Pages`, hitComp: `PageHit` },\\n  { name: `Posts`, title: `Blog Posts`, hitComp: `PostHit` },\\n]\\n\\nconst Header = ({ site, transparent }) => (\\n  <Container transparent={transparent}>\\n    <Logo to=\\\"/\\\" title={site.title} rel=\\\"home\\\" />\\n    <Nav />\\n    <Search collapse indices={searchIndices} />\\n  </Container>\\n)\\n\\nexport default Header\\n\")), mdx(\"p\", null, \"Note that this is where you define your array of search indices and pass it as a prop to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Search\"), \".\"), mdx(\"p\", null, \"If everything works as expected, running \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby develop\"), \" should now give you some instant search magic looking something like in the video below! You can also play around with it \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://janosh.io/blog\"\n  }), \"here\"), \".\"), mdx(\"p\", null, mdx(\"undefined\", {\n    parentName: \"p\"\n  }, \"\\n          \", mdx(\"div\", {\n    \"className\": \"gatsby-resp-iframe-wrapper\",\n    \"style\": {\n      \"paddingBottom\": \"56.42857142857143%\",\n      \"position\": \"relative\",\n      \"height\": \"0\",\n      \"overflow\": \"hidden\",\n      \"marginBottom\": \"1.5rem\"\n    }\n  }, \"\\n            \", mdx(\"div\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"embedVideo-container\"\n  }), \"\\n            \", mdx(\"iframe\", _extends({\n    parentName: \"div\"\n  }, {\n    \"src\": \"https://www.youtube.com/embed/Amsub4xJ3Jc?rel=0\",\n    \"className\": \"embedVideo-iframe\",\n    \"style\": {\n      \"border\": \"0\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    },\n    \"allowFullScreen\": true\n  })), \"\\n        \"), \"\\n          \"), \"\\n          \")), mdx(\"h2\", {\n    \"id\": \"additional-resources\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#additional-resources\",\n    \"aria-label\": \"additional resources permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Additional Resources\"), mdx(\"p\", null, \"If you have any issues or if you want to learn more about using Algolia for search, check out this tutorial from Jason Lengstorf:\"), mdx(\"p\", null, mdx(\"undefined\", {\n    parentName: \"p\"\n  }, \"\\n          \", mdx(\"div\", {\n    \"className\": \"gatsby-resp-iframe-wrapper\",\n    \"style\": {\n      \"paddingBottom\": \"56.42857142857143%\",\n      \"position\": \"relative\",\n      \"height\": \"0\",\n      \"overflow\": \"hidden\",\n      \"marginBottom\": \"1.5rem\"\n    }\n  }, \"\\n            \", mdx(\"div\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"embedVideo-container\"\n  }), \"\\n            \", mdx(\"iframe\", _extends({\n    parentName: \"div\"\n  }, {\n    \"src\": \"https://www.youtube.com/embed/VSkXyuXzwlc?rel=0\",\n    \"className\": \"embedVideo-iframe\",\n    \"style\": {\n      \"border\": \"0\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    },\n    \"allowFullScreen\": true\n  })), \"\\n        \"), \"\\n          \"), \"\\n          \")), mdx(\"p\", null, \"You can also find stories of companies using Gatsby + Algolia together \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/blog/tags/algolia\"\n  }), \"in the Algolia section of the blog\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;",
        "excerpt": "Once you've added some content to your site, you'll want to make it easy for your visitors to find what they're looking for. This guide will…",
        "timeToRead": 7,
        "tableOfContents": {
          "items": [
            {
              "url": "#why-use-algolia",
              "title": "Why Use Algolia?"
            },
            {
              "url": "#configuring-the-algolia-plugin",
              "title": "Configuring the Algolia plugin"
            },
            {
              "url": "#adding-a-search-interface-to-your-site",
              "title": "Adding a search interface to your site",
              "items": [
                {
                  "url": "#indexjs",
                  "title": "index.js"
                }
              ]
            },
            {
              "url": "#inputjs",
              "title": "input.js"
            },
            {
              "url": "#stylesjs",
              "title": "styles.js"
            },
            {
              "url": "#hitcompsjs",
              "title": "hitComps.js"
            },
            {
              "url": "#usage",
              "title": "Usage"
            },
            {
              "url": "#additional-resources",
              "title": "Additional Resources"
            }
          ]
        },
        "fields": {
          "slug": "/docs/adding-search-with-algolia/",
          "anchor": "adding-search-with-algolia"
        },
        "frontmatter": {
          "title": "Adding search with Algolia",
          "overview": null,
          "issue": null,
          "disableTableOfContents": null,
          "tableOfContentsDepth": null
        },
        "parent": {
          "__typename": "File",
          "relativePath": "docs/adding-search-with-algolia.md"
        }
      }
    },
    "pageContext": {
      "isCreatedByStatefulCreatePages": false,
      "slug": "/docs/adding-search-with-algolia/",
      "prev": {
        "title": "Adding Search",
        "link": "/docs/adding-search/",
        "breadcrumbTitle": "Search"
      },
      "next": {
        "title": "Adding Search with elasticlunr*",
        "link": "/docs/adding-search-with-elasticlunr/"
      }
    }
  },
  "query": "query usersMisiekDevGatsbyWwwSrcTemplatesTemplateDocsMarkdownJs2546709735(\n  $path: String!\n) {\n  mdx(fields: {slug: {eq: $path}}) {\n    body\n    excerpt\n    timeToRead\n    tableOfContents\n    fields {\n      slug\n      anchor\n    }\n    frontmatter {\n      title\n      overview\n      issue\n      disableTableOfContents\n      tableOfContentsDepth\n    }\n    ...MarkdownPageFooterMdx\n  }\n}\n\nfragment MarkdownPageFooterMdx on Mdx {\n  parent {\n    __typename\n    ... on File {\n      relativePath\n    }\n  }\n}\n"
}